2025-07-28 19:59:21.115 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-28 19:59:21.353 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-07-28 19:59:21.359 +08:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-28 19:59:21.360 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-07-28 19:59:21.362 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-28 19:59:21.365 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-28 19:59:21.391 +08:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-28 19:59:21.510 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Courses" AS c)
2025-07-28 19:59:21.515 +08:00 [INF] Database already contains data. Skipping seed.
2025-07-28 19:59:21.556 +08:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5295: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-07-28 19:59:21.567 +08:00 [FTL] Application start-up failed
System.IO.IOException: Failed to bind to address http://127.0.0.1:5295: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in D:\ProductDevelopment\Cece\CeceLearningPortal.Backend\CeceLearningPortal.Api\Program.cs:line 209
2025-07-28 22:19:17.137 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-28 22:19:17.383 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-07-28 22:19:17.388 +08:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-28 22:19:17.389 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-07-28 22:19:17.390 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-28 22:19:17.393 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-28 22:19:17.410 +08:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-28 22:19:17.532 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Courses" AS c)
2025-07-28 22:19:17.537 +08:00 [INF] Database already contains data. Skipping seed.
2025-07-28 22:19:17.578 +08:00 [INF] Now listening on: http://localhost:5295
2025-07-28 22:19:17.579 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-28 22:19:17.579 +08:00 [INF] Hosting environment: Development
2025-07-28 22:19:17.580 +08:00 [INF] Content root path: D:\ProductDevelopment\Cece\CeceLearningPortal.Backend\CeceLearningPortal.Api
2025-07-28 22:19:47.625 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 22:19:47.625 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:19:47.652 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:19:47.677 +08:00 [WRN] Failed to determine the https port for redirect.
2025-07-28 22:19:47.678 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:47.678 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:47.678 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:47.683 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 59.9195ms
2025-07-28 22:19:47.683 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 59.9252ms
2025-07-28 22:19:47.683 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 31.7411ms
2025-07-28 22:19:47.688 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:19:47.689 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:19:47.694 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:47.694 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:47.796 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:19:47.799 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 22:19:47.800 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 401 0 null 111.7022ms
2025-07-28 22:19:47.813 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:47 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:19:47.822 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:47 PM'.
2025-07-28 22:19:47.823 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:47 PM'.
2025-07-28 22:19:47.881 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:19:47.884 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:19:47.899 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:19:48.033 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-28 22:19:48.074 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:19:48.241 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:19:48.267 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:19:48.268 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 366.0011ms
2025-07-28 22:19:48.268 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:48.269 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:19:48.270 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:19:48.271 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:19:48.272 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 583.5753ms
2025-07-28 22:19:48.274 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - null null
2025-07-28 22:19:48.276 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:48.277 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - 204 null null 2.9391ms
2025-07-28 22:19:48.279 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - application/json null
2025-07-28 22:19:48.279 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:19:48.281 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:48.283 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:48 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:19:48.285 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:48 PM'.
2025-07-28 22:19:48.285 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:19:48.285 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:48 PM'.
2025-07-28 22:19:48.287 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 14.5126ms
2025-07-28 22:19:48.288 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:19:48.289 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 22.119ms
2025-07-28 22:19:48.290 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:19:48.293 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - 404 0 null 13.4233ms
2025-07-28 22:19:48.295 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats, Response status code: 404
2025-07-28 22:19:48.299 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 22:19:48.301 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:48.302 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 2.727ms
2025-07-28 22:19:48.303 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 22:19:48.305 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:48.308 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:48 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:19:48.309 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:48 PM'.
2025-07-28 22:19:48.310 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:48 PM'.
2025-07-28 22:19:48.313 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:19:48.314 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:19:48.314 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:19:48.322 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:19:48.326 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:19:48.327 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 11.2982ms
2025-07-28 22:19:48.327 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:19:48.328 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - 200 null application/json; charset=utf-8 24.5539ms
2025-07-28 22:19:52.296 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:19:52.298 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:52.298 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 2.2058ms
2025-07-28 22:19:52.300 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:19:52.301 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:52.302 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:52 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:19:52.304 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:52 PM'.
2025-07-28 22:19:52.305 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:52 PM'.
2025-07-28 22:19:52.308 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:19:52.309 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:19:52.310 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:19:52.314 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:19:52.318 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:19:52.319 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 8.9435ms
2025-07-28 22:19:52.320 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:19:52.321 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 20.9523ms
2025-07-28 22:19:52.323 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 22:19:52.324 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:52.324 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 1.588ms
2025-07-28 22:19:52.326 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:19:52.327 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:52.328 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:52 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:19:52.329 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:52 PM'.
2025-07-28 22:19:52.330 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:52 PM'.
2025-07-28 22:19:52.332 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:19:52.334 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:19:52.335 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 22:19:52.336 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 401 0 null 10.3919ms
2025-07-28 22:19:52.338 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 22:19:52.338 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 22:19:52.338 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:19:52.339 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:52.340 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:52.341 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:52.342 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 4.0698ms
2025-07-28 22:19:52.342 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 4.2952ms
2025-07-28 22:19:52.343 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:52 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:19:52.344 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 22:19:52.345 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 22:19:52.347 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:52 PM'.
2025-07-28 22:19:52.348 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:52.349 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:19:52.349 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:52 PM'.
2025-07-28 22:19:52.350 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:52 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:19:52.350 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:52 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:19:52.352 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:52 PM'.
2025-07-28 22:19:52.352 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:19:52.353 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:52 PM'.
2025-07-28 22:19:52.354 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:52 PM'.
2025-07-28 22:19:52.356 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:19:52 PM'.
2025-07-28 22:19:52.357 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:19:52.358 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 22:19:52.359 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 401 0 null 20.9986ms
2025-07-28 22:19:52.359 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:19:52.362 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api)'
2025-07-28 22:19:52.365 +08:00 [INF] Route matched with {action = "GetInstructorRevenue", controller = "Revenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetInstructorRevenue(System.String) on controller CeceLearningPortal.Api.Controllers.RevenueController (CeceLearningPortal.Api).
2025-07-28 22:19:52.386 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__p_0
LIMIT 1
2025-07-28 22:19:52.395 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__instructorId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
FROM "Courses" AS c
WHERE c."InstructorId" = @__instructorId_0
2025-07-28 22:19:52.427 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:19:52.428 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-28 22:19:52.429 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 22:19:52.430 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 401 0 null 84.2129ms
2025-07-28 22:19:52.443 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:19:52.460 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:19:52.469 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:19:52.476 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:19:52.479 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:19:52.482 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:19:52.484 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:19:52.486 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:19:52.489 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:19:52.492 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:19:52.495 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:19:52.497 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:19:52.499 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:19:52.500 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:19:52.503 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:19:52.505 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:19:52.506 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:19:52.508 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:19:52.510 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:19:52.512 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:19:52.513 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.InstructorRevenueDto'.
2025-07-28 22:19:52.517 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api) in 150.0464ms
2025-07-28 22:19:52.518 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api)'
2025-07-28 22:19:52.519 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 200 null application/json; charset=utf-8 174.5773ms
2025-07-28 22:27:53.306 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/profile - null null
2025-07-28 22:27:53.308 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:53.309 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/profile - 204 null null 2.5792ms
2025-07-28 22:27:53.311 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/profile - application/json null
2025-07-28 22:27:53.312 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:53.313 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:27:53.315 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
2025-07-28 22:27:53.316 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
2025-07-28 22:27:53.363 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:27:53.365 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/profile - 404 0 null 53.725ms
2025-07-28 22:27:53.367 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/profile, Response status code: 404
2025-07-28 22:27:53.368 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 22:27:53.370 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:53.371 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 3.0479ms
2025-07-28 22:27:53.373 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 22:27:53.375 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:53.376 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:27:53.379 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
2025-07-28 22:27:53.380 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
2025-07-28 22:27:53.383 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:27:53.385 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-28 22:27:53.386 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 22:27:53.387 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44 - 401 0 null 13.6402ms
2025-07-28 22:27:53.389 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/stats - null null
2025-07-28 22:27:53.390 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:53.390 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/stats - 204 null null 1.5243ms
2025-07-28 22:27:53.392 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/stats - application/json null
2025-07-28 22:27:53.393 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:53.394 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:27:53.397 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
2025-07-28 22:27:53.397 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
2025-07-28 22:27:53.400 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:27:53.402 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-28 22:27:53.403 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 22:27:53.404 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/stats - 401 0 null 12.2215ms
2025-07-28 22:27:53.407 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/certificates - null null
2025-07-28 22:27:53.408 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:53.409 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/certificates - 204 null null 2.5284ms
2025-07-28 22:27:53.411 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/certificates - application/json null
2025-07-28 22:27:53.413 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:53.414 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:27:53.415 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
2025-07-28 22:27:53.416 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
2025-07-28 22:27:53.417 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:27:53.418 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/certificates - 404 0 null 6.9641ms
2025-07-28 22:27:53.420 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/certificates, Response status code: 404
2025-07-28 22:27:53.421 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/activity - null null
2025-07-28 22:27:53.422 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:53.422 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/activity - 204 null null 1.4605ms
2025-07-28 22:27:53.424 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/activity - application/json null
2025-07-28 22:27:53.425 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:53.425 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:27:53.427 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
2025-07-28 22:27:53.427 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
2025-07-28 22:27:53.428 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:27:53.430 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/activity - 404 0 null 6.2336ms
2025-07-28 22:27:53.432 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/activity, Response status code: 404
2025-07-28 22:27:53.433 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - null null
2025-07-28 22:27:53.434 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:53.435 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - 204 null null 1.4996ms
2025-07-28 22:27:53.436 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - application/json null
2025-07-28 22:27:53.437 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:53.438 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:27:53.439 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
2025-07-28 22:27:53.440 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:53 PM'.
2025-07-28 22:27:53.441 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:27:53.442 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - 404 0 null 5.7532ms
2025-07-28 22:27:53.443 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats, Response status code: 404
2025-07-28 22:27:55.337 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:27:55.338 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:55.339 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 2.0191ms
2025-07-28 22:27:55.340 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:27:55.341 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:55.342 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:55 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:27:55.343 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:55 PM'.
2025-07-28 22:27:55.343 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:55 PM'.
2025-07-28 22:27:55.345 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:27:55.346 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:27:55.347 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:27:55.353 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:27:55.357 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:27:55.358 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 9.9995ms
2025-07-28 22:27:55.358 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:27:55.359 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 18.741ms
2025-07-28 22:27:55.360 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 22:27:55.361 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:55.362 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 1.6042ms
2025-07-28 22:27:55.363 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:27:55.365 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:55.365 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:55 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:27:55.366 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:55 PM'.
2025-07-28 22:27:55.367 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:55 PM'.
2025-07-28 22:27:55.369 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:27:55.370 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:27:55.370 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 22:27:55.371 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 401 0 null 7.408ms
2025-07-28 22:27:55.372 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:27:55.373 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 22:27:55.373 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 22:27:55.374 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:55.375 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:55.376 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:55.376 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:55 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:27:55.377 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 3.491ms
2025-07-28 22:27:55.377 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 3.7372ms
2025-07-28 22:27:55.378 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:55 PM'.
2025-07-28 22:27:55.379 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 22:27:55.381 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 22:27:55.381 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:55 PM'.
2025-07-28 22:27:55.383 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:55.384 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:55.385 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:55 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:27:55.385 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:55 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:27:55.385 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:27:55.386 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:55 PM'.
2025-07-28 22:27:55.387 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:55 PM'.
2025-07-28 22:27:55.389 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:27:55.390 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:55 PM'.
2025-07-28 22:27:55.390 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:55 PM'.
2025-07-28 22:27:55.391 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 22:27:55.393 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 401 0 null 19.9977ms
2025-07-28 22:27:55.393 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:27:55.396 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-28 22:27:55.397 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 22:27:55.398 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 401 0 null 18.2636ms
2025-07-28 22:27:55.445 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:27:55.447 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api)'
2025-07-28 22:27:55.447 +08:00 [INF] Route matched with {action = "GetInstructorRevenue", controller = "Revenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetInstructorRevenue(System.String) on controller CeceLearningPortal.Api.Controllers.RevenueController (CeceLearningPortal.Api).
2025-07-28 22:27:55.450 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__p_0
LIMIT 1
2025-07-28 22:27:55.452 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__instructorId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
FROM "Courses" AS c
WHERE c."InstructorId" = @__instructorId_0
2025-07-28 22:27:55.456 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:27:55.459 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:27:55.461 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:27:55.463 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:27:55.464 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:27:55.467 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:27:55.468 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:27:55.470 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:27:55.471 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:27:55.473 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:27:55.475 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:27:55.476 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:27:55.478 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:27:55.480 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:27:55.481 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:27:55.482 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:27:55.484 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:27:55.486 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:27:55.487 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:27:55.489 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:27:55.490 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.InstructorRevenueDto'.
2025-07-28 22:27:55.491 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api) in 42.7241ms
2025-07-28 22:27:55.491 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api)'
2025-07-28 22:27:55.492 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 200 null application/json; charset=utf-8 110.8391ms
2025-07-28 22:27:57.280 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:27:57.280 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:27:57.282 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:57.283 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:57.284 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:57 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:27:57.284 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:57 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:27:57.286 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:57 PM'.
2025-07-28 22:27:57.287 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:57 PM'.
2025-07-28 22:27:57.288 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:57 PM'.
2025-07-28 22:27:57.288 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:57 PM'.
2025-07-28 22:27:57.292 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:27:57.292 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:27:57.293 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:27:57.294 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:27:57.294 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 22:27:57.295 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:27:57.295 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 401 0 null 15.5825ms
2025-07-28 22:27:57.302 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:27:57.305 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:27:57.306 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 9.545ms
2025-07-28 22:27:57.307 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:27:57.308 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 27.6631ms
2025-07-28 22:27:57.309 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - application/json null
2025-07-28 22:27:57.311 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:57.311 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:57 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:27:57.313 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:57 PM'.
2025-07-28 22:27:57.314 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:57 PM'.
2025-07-28 22:27:57.316 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:27:57.317 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - 404 0 null 7.4202ms
2025-07-28 22:27:57.318 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats, Response status code: 404
2025-07-28 22:27:57.324 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 22:27:57.325 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:57.326 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 1.8753ms
2025-07-28 22:27:57.327 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 22:27:57.329 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:57.329 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:57 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:27:57.331 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:57 PM'.
2025-07-28 22:27:57.332 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:57 PM'.
2025-07-28 22:27:57.333 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:27:57.335 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:27:57.336 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:27:57.340 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:27:57.342 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:27:57.343 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 6.3451ms
2025-07-28 22:27:57.344 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:27:57.345 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - 200 null application/json; charset=utf-8 17.4224ms
2025-07-28 22:27:59.301 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - null null
2025-07-28 22:27:59.302 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:59.303 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - 204 null null 1.8753ms
2025-07-28 22:27:59.304 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/logout - application/json 0
2025-07-28 22:27:59.306 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:59.307 +08:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:59 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-28 22:27:59.308 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:59 PM'.
2025-07-28 22:27:59.308 +08:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/28/2025 1:02:31 PM', Current time (UTC): '7/28/2025 2:27:59 PM'.
2025-07-28 22:27:59.310 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:27:59.311 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-28 22:27:59.312 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 22:27:59.312 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/logout - 401 0 null 7.9249ms
2025-07-28 22:27:59.324 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:27:59.325 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:27:59.326 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:27:59.326 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:27:59.330 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:27:59.333 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:27:59.333 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 5.9748ms
2025-07-28 22:27:59.334 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:27:59.335 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 10.9463ms
2025-07-28 22:28:01.474 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - null null
2025-07-28 22:28:01.475 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:01.476 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - 204 null null 2.0174ms
2025-07-28 22:28:01.477 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/login - application/json 55
2025-07-28 22:28:01.478 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:01.479 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 22:28:01.482 +08:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(CeceLearningPortal.Api.DTOs.LoginDto) on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 22:28:01.497 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-07-28 22:28:01.621 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?', @p2='?', @p0='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = DateTime), @p8='?', @p9='?', @p10='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "LastLoginAt" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2;
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "RevokedAt", "RevokedByIp", "Token", "UserId")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
2025-07-28 22:28:01.634 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.AuthResponseDto'.
2025-07-28 22:28:01.636 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api) in 153.3481ms
2025-07-28 22:28:01.637 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 22:28:01.637 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/login - 200 null application/json; charset=utf-8 159.8286ms
2025-07-28 22:28:01.650 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:28:01.651 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 22:28:01.652 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:01.653 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:01.653 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 2.9281ms
2025-07-28 22:28:01.654 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 3.0573ms
2025-07-28 22:28:01.655 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:28:01.656 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:28:01.658 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:01.659 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:01.665 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:01.665 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:01.666 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:28:01.668 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:28:01.668 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:28:01.669 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-28 22:28:01.669 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 403 0 null 12.9479ms
2025-07-28 22:28:01.671 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:28:01.673 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:28:01.674 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 5.3893ms
2025-07-28 22:28:01.675 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:28:01.676 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 20.4796ms
2025-07-28 22:28:04.242 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:28:04.244 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:04.246 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:04.247 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:28:04.247 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:28:04.251 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:28:04.254 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:28:04.255 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 6.5125ms
2025-07-28 22:28:04.255 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:28:04.256 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 13.7535ms
2025-07-28 22:28:04.258 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:28:04.259 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:04.260 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:04.262 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:28:04.262 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-28 22:28:04.263 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 403 0 null 4.9485ms
2025-07-28 22:28:04.275 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:28:04.276 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:04.278 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:04.279 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:28:04.280 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-28 22:28:04.281 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 403 0 null 6.0942ms
2025-07-28 22:28:04.288 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/students/stats - null null
2025-07-28 22:28:04.289 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:04.290 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/students/stats - 204 null null 2.4971ms
2025-07-28 22:28:04.292 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/students/stats - application/json null
2025-07-28 22:28:04.294 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:04.296 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:04.298 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.StudentsController.GetStudentStats (CeceLearningPortal.Api)'
2025-07-28 22:28:04.301 +08:00 [INF] Route matched with {action = "GetStudentStats", controller = "Students"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStudentStats() on controller CeceLearningPortal.Api.Controllers.StudentsController (CeceLearningPortal.Api).
2025-07-28 22:28:04.314 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent", c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
FROM "Enrollments" AS e
INNER JOIN "Courses" AS c ON e."CourseId" = c."Id"
WHERE e."StudentId" = @__userId_0
2025-07-28 22:28:04.322 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Amount", p."CourseId", p."CreatedAt", p."Currency", p."PaymentIntentId", p."PaymentMethod", p."ProcessedAt", p."Status", p."SubscriptionId", p."TransactionId", p."UserId"
FROM "Payments" AS p
WHERE p."UserId" = @__userId_0 AND p."Status" = 'Completed'
2025-07-28 22:28:04.344 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType33`9[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:28:04.362 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.StudentsController.GetStudentStats (CeceLearningPortal.Api) in 60.3516ms
2025-07-28 22:28:04.363 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.StudentsController.GetStudentStats (CeceLearningPortal.Api)'
2025-07-28 22:28:04.363 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/students/stats - 200 null application/json; charset=utf-8 71.2038ms
2025-07-28 22:28:04.365 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/students/courses - null null
2025-07-28 22:28:04.366 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:04.367 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/students/courses - 204 null null 1.4526ms
2025-07-28 22:28:04.368 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/students/courses - application/json null
2025-07-28 22:28:04.369 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:04.371 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:04.372 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.StudentsController.GetEnrolledCourses (CeceLearningPortal.Api)'
2025-07-28 22:28:04.374 +08:00 [INF] Route matched with {action = "GetEnrolledCourses", controller = "Students"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetEnrolledCourses() on controller CeceLearningPortal.Api.Controllers.StudentsController (CeceLearningPortal.Api).
2025-07-28 22:28:04.385 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-28 22:28:04.402 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent", c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl"
FROM "Enrollments" AS e
INNER JOIN "Courses" AS c ON e."CourseId" = c."Id"
INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s ON c."Id" = s."CourseId"
WHERE e."StudentId" = @__userId_0
ORDER BY COALESCE(e."LastAccessedDate", e."EnrolledAt") DESC, e."Id", c."Id", a."Id", s."Id"
2025-07-28 22:28:04.406 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType32`14[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:28:04.411 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.StudentsController.GetEnrolledCourses (CeceLearningPortal.Api) in 35.9822ms
2025-07-28 22:28:04.412 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.StudentsController.GetEnrolledCourses (CeceLearningPortal.Api)'
2025-07-28 22:28:04.413 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/students/courses - 200 null application/json; charset=utf-8 44.6328ms
2025-07-28 22:28:04.414 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/subscriptions/current - null null
2025-07-28 22:28:04.415 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:04.416 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/subscriptions/current - 204 null null 1.4809ms
2025-07-28 22:28:04.417 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/subscriptions/current - application/json null
2025-07-28 22:28:04.418 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:04.420 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:04.421 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/subscriptions/current - 404 0 null 3.513ms
2025-07-28 22:28:04.422 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5295/api/subscriptions/current, Response status code: 404
2025-07-28 22:28:46.194 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - null null
2025-07-28 22:28:46.196 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:46.196 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - 204 null null 1.7368ms
2025-07-28 22:28:46.198 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/logout - application/json 0
2025-07-28 22:28:46.199 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:46.201 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:46.202 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api)'
2025-07-28 22:28:46.204 +08:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 22:28:46.226 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Id", a0."AccessFailedCount", a0."Avatar", a0."ConcurrencyStamp", a0."CreatedAt", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LastLoginAt", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."NotificationPreferences", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."RefreshTokenExpiryTime", a0."Role", a0."SecurityStamp", a0."Status", a0."TwoFactorEnabled", a0."UserName", r."Id", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."RevokedAt", r."RevokedByIp", r."Token", r."UserId"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS a0
LEFT JOIN "RefreshTokens" AS r ON a0."Id" = r."UserId"
ORDER BY a0."Id"
2025-07-28 22:28:46.232 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "RevokedAt" = @p0
WHERE "Id" = @p1;
2025-07-28 22:28:46.233 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:28:46.235 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api) in 29.6059ms
2025-07-28 22:28:46.235 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api)'
2025-07-28 22:28:46.236 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/logout - 200 null application/json; charset=utf-8 37.9562ms
2025-07-28 22:28:46.267 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:28:46.269 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:46.269 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 2.4435ms
2025-07-28 22:28:46.272 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:28:46.273 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:46.273 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:28:46.274 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:28:46.278 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:28:46.280 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:28:46.281 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 6.0731ms
2025-07-28 22:28:46.282 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:28:46.283 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 11.4899ms
2025-07-28 22:28:46.293 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 22:28:46.294 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:46.295 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 2.2128ms
2025-07-28 22:28:46.297 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:28:46.298 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:46.299 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:28:46.299 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 22:28:46.300 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 401 0 null 3.0269ms
2025-07-28 22:28:49.079 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - null null
2025-07-28 22:28:49.081 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:49.081 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - 204 null null 2.151ms
2025-07-28 22:28:49.083 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/login - application/json 51
2025-07-28 22:28:49.084 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:49.084 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 22:28:49.085 +08:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(CeceLearningPortal.Api.DTOs.LoginDto) on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 22:28:49.094 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-07-28 22:28:49.140 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?', @p2='?', @p0='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = DateTime), @p8='?', @p9='?', @p10='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "LastLoginAt" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2;
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "RevokedAt", "RevokedByIp", "Token", "UserId")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
2025-07-28 22:28:49.142 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.AuthResponseDto'.
2025-07-28 22:28:49.142 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api) in 56.7358ms
2025-07-28 22:28:49.143 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 22:28:49.144 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/login - 200 null application/json; charset=utf-8 60.8854ms
2025-07-28 22:28:49.157 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 22:28:49.157 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:28:49.158 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:49.159 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:49.160 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 2.6132ms
2025-07-28 22:28:49.160 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 3.0601ms
2025-07-28 22:28:49.161 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:28:49.163 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:28:49.164 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:49.165 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:49.167 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:49.167 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:49.169 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:28:49.170 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:28:49.170 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:28:49.172 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:28:49.173 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:28:49.176 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:28:49.176 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 22:28:49.176 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 5.0871ms
2025-07-28 22:28:49.178 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:28:49.178 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 15.072ms
2025-07-28 22:28:49.178 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 22:28:49.183 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 22:28:49.185 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 22:28:49.225 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 22:28:49.242 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 22:28:49.250 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 22:28:49.256 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 22:28:49.259 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 22:28:49.263 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 22:28:49.265 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`6[[<>f__AnonymousType7`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:28:49.273 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 99.8735ms
2025-07-28 22:28:49.274 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:28:49.274 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 112.7156ms
2025-07-28 22:28:52.028 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:28:52.029 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:52.030 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:52.032 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:28:52.032 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:28:52.034 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 22:28:52.035 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 22:28:52.037 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 22:28:52.038 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 22:28:52.041 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 22:28:52.042 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 22:28:52.044 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 22:28:52.045 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 22:28:52.047 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 22:28:52.048 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 22:28:52.049 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`6[[<>f__AnonymousType7`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:28:52.050 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 16.3799ms
2025-07-28 22:28:52.050 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:28:52.051 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 23.2848ms
2025-07-28 22:28:53.475 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:28:53.476 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.477 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:53.478 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:28:53.479 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:28:53.482 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:28:53.484 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:28:53.485 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 5.7828ms
2025-07-28 22:28:53.486 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:28:53.487 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 12.0761ms
2025-07-28 22:28:53.489 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - null null
2025-07-28 22:28:53.489 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - null null
2025-07-28 22:28:53.489 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - null null
2025-07-28 22:28:53.490 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.490 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - null null
2025-07-28 22:28:53.491 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - null null
2025-07-28 22:28:53.491 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - null null
2025-07-28 22:28:53.492 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.492 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.493 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - 204 null null 3.9264ms
2025-07-28 22:28:53.494 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.494 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.495 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.496 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - 204 null null 6.8801ms
2025-07-28 22:28:53.496 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - 204 null null 6.8417ms
2025-07-28 22:28:53.498 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - null null
2025-07-28 22:28:53.498 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - 204 null null 7.6215ms
2025-07-28 22:28:53.499 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - 204 null null 7.9297ms
2025-07-28 22:28:53.499 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - 204 null null 8.1415ms
2025-07-28 22:28:53.501 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - null null
2025-07-28 22:28:53.502 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - null null
2025-07-28 22:28:53.503 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.504 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - null null
2025-07-28 22:28:53.506 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - null null
2025-07-28 22:28:53.507 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - null null
2025-07-28 22:28:53.508 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.509 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.509 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - 204 null null 11.445ms
2025-07-28 22:28:53.510 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.511 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.512 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.512 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - 204 null null 11.8809ms
2025-07-28 22:28:53.513 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - 204 null null 10.9273ms
2025-07-28 22:28:53.514 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/73 - application/json null
2025-07-28 22:28:53.515 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - 204 null null 10.3411ms
2025-07-28 22:28:53.515 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - 204 null null 9.4964ms
2025-07-28 22:28:53.515 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - 204 null null 8.746ms
2025-07-28 22:28:53.517 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/70 - application/json null
2025-07-28 22:28:53.518 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/66 - application/json null
2025-07-28 22:28:53.519 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.520 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/72 - application/json null
2025-07-28 22:28:53.522 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/69 - application/json null
2025-07-28 22:28:53.523 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/65 - application/json null
2025-07-28 22:28:53.524 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.525 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.526 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.526 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:53.527 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.528 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.529 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:53.531 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.533 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:53.533 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.535 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.536 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:28:53.537 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:28:53.536 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:28:53.543 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-28 22:28:53.568 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:28:53.568 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:28:53.574 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:28:53.574 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:28:53.575 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 36.3238ms
2025-07-28 22:28:53.575 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 38.7748ms
2025-07-28 22:28:53.577 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.578 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:53.578 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.579 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/69 - 200 null application/json; charset=utf-8 56.9696ms
2025-07-28 22:28:53.580 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.581 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/73 - 200 null application/json; charset=utf-8 66.7937ms
2025-07-28 22:28:53.583 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:53.583 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/71 - application/json null
2025-07-28 22:28:53.584 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:28:53.585 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/68 - application/json null
2025-07-28 22:28:53.586 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.587 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.589 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.590 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:28:53.591 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:53.591 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:28:53.591 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:53.593 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.595 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:28:53.596 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.596 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:28:53.597 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 8.8874ms
2025-07-28 22:28:53.598 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:28:53.600 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.600 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:28:53.601 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:28:53.601 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/66 - 200 null application/json; charset=utf-8 83.292ms
2025-07-28 22:28:53.603 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:28:53.603 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:28:53.605 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:28:53.606 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/64 - application/json null
2025-07-28 22:28:53.607 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:28:53.608 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 16.2496ms
2025-07-28 22:28:53.609 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 9.5438ms
2025-07-28 22:28:53.610 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.610 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 9.3055ms
2025-07-28 22:28:53.611 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.612 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.612 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.613 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:53.613 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/72 - 200 null application/json; charset=utf-8 92.6923ms
2025-07-28 22:28:53.614 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/71 - 200 null application/json; charset=utf-8 30.9189ms
2025-07-28 22:28:53.615 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/68 - 200 null application/json; charset=utf-8 29.6922ms
2025-07-28 22:28:53.616 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.617 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/67 - application/json null
2025-07-28 22:28:53.618 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/63 - application/json null
2025-07-28 22:28:53.620 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/62 - application/json null
2025-07-28 22:28:53.621 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:28:53.621 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:28:53.622 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.623 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.624 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:28:53.627 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:28:53.627 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:28:53.628 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:53.628 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:53.628 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:53.628 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 90.6914ms
2025-07-28 22:28:53.630 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:28:53.631 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.632 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.633 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.634 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.634 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 9.4743ms
2025-07-28 22:28:53.635 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:28:53.635 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:28:53.636 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:28:53.636 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/70 - 200 null application/json; charset=utf-8 119.2311ms
2025-07-28 22:28:53.637 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.639 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:28:53.640 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:28:53.641 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:28:53.641 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/64 - 200 null application/json; charset=utf-8 34.7451ms
2025-07-28 22:28:53.642 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:28:53.644 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:28:53.645 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:28:53.647 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 9.3863ms
2025-07-28 22:28:53.647 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 9.2725ms
2025-07-28 22:28:53.648 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 9.0933ms
2025-07-28 22:28:53.649 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.649 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.650 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.650 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/67 - 200 null application/json; charset=utf-8 32.9346ms
2025-07-28 22:28:53.651 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/63 - 200 null application/json; charset=utf-8 32.2154ms
2025-07-28 22:28:53.651 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/62 - 200 null application/json; charset=utf-8 31.0767ms
2025-07-28 22:28:53.693 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:28:53.694 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.695 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:28:53.697 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:28:53.699 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:28:53.700 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 4.6819ms
2025-07-28 22:28:53.701 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:28:53.701 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/65 - 200 null application/json; charset=utf-8 178.345ms
2025-07-28 22:29:09.727 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:29:09.729 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:29:09.729 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 2.1029ms
2025-07-28 22:29:09.731 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:29:09.732 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:29:09.734 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:29:09.736 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:29:09.737 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:29:09.740 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:29:09.742 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:29:09.743 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 5.63ms
2025-07-28 22:29:09.744 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:29:09.744 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 13.2533ms
2025-07-28 22:29:09.746 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 22:29:09.747 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:29:09.748 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 1.6353ms
2025-07-28 22:29:09.749 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:29:09.750 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:29:09.752 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:29:09.753 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:29:09.753 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:29:09.755 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 22:29:09.757 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 22:29:09.758 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 22:29:09.760 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 22:29:09.763 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 22:29:09.767 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 22:29:09.769 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 22:29:09.772 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 22:29:09.775 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 22:29:09.779 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 22:29:09.780 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`6[[<>f__AnonymousType7`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:29:09.782 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 27.4271ms
2025-07-28 22:29:09.782 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:29:09.782 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:29:09.783 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 33.5212ms
2025-07-28 22:29:09.784 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:29:09.788 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:29:09.789 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:29:09.789 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:29:09.790 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 22:29:09.791 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 22:29:09.793 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 22:29:09.794 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 22:29:09.802 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 22:29:09.804 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 22:29:09.806 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 22:29:09.807 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 22:29:09.809 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 22:29:09.810 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 22:29:09.811 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`6[[<>f__AnonymousType7`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:29:09.812 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 21.9198ms
2025-07-28 22:29:09.812 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:29:09.813 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 30.4404ms
2025-07-28 22:29:09.814 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=801dc698-62a8-49c3-b578-b7c1b05049a4 - null null
2025-07-28 22:29:09.814 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=e090c598-224f-4b4c-870a-3c3ef6303e0a - null null
2025-07-28 22:29:09.814 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 22:29:09.815 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:29:09.816 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:29:09.817 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:29:09.818 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=801dc698-62a8-49c3-b578-b7c1b05049a4 - 204 null null 3.3157ms
2025-07-28 22:29:09.818 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=e090c598-224f-4b4c-870a-3c3ef6303e0a - 204 null null 3.6184ms
2025-07-28 22:29:09.818 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 3.974ms
2025-07-28 22:29:09.820 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=e090c598-224f-4b4c-870a-3c3ef6303e0a - application/json null
2025-07-28 22:29:09.821 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=801dc698-62a8-49c3-b578-b7c1b05049a4 - application/json null
2025-07-28 22:29:09.822 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 22:29:09.823 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:29:09.824 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:29:09.825 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:29:09.826 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:29:09.826 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:29:09.827 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:29:09.827 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:29:09.828 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:29:09.829 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:29:09.830 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:29:09.830 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:29:09.830 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:29:09.835 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:29:09.836 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:29:09.837 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:29:09.837 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:29:09.838 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:29:09.839 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 7.3093ms
2025-07-28 22:29:09.840 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:29:09.841 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 7.2825ms
2025-07-28 22:29:09.841 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:29:09.842 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 9.9502ms
2025-07-28 22:29:09.843 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:29:09.843 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=e090c598-224f-4b4c-870a-3c3ef6303e0a - 200 null application/json; charset=utf-8 23.549ms
2025-07-28 22:29:09.844 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:29:09.844 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - 200 null application/json; charset=utf-8 22.2379ms
2025-07-28 22:29:09.846 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=801dc698-62a8-49c3-b578-b7c1b05049a4 - 200 null application/json; charset=utf-8 25.0658ms
2025-07-28 22:31:19.423 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 22:31:19.425 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:31:19.425 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 2.183ms
2025-07-28 22:31:19.428 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:31:19.429 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:31:19.430 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:31:19.432 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:31:19.433 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:31:19.435 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 22:31:19.436 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 22:31:19.438 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 22:31:19.440 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 22:31:19.443 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 22:31:19.445 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 22:31:19.447 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 22:31:19.449 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 22:31:19.450 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 22:31:19.452 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 22:31:19.453 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`6[[<>f__AnonymousType7`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:31:19.454 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 19.6371ms
2025-07-28 22:31:19.454 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:31:19.455 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 27.5416ms
2025-07-28 22:33:38.674 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - null null
2025-07-28 22:33:38.676 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:38.676 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - 204 null null 1.6609ms
2025-07-28 22:33:38.677 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/logout - application/json 0
2025-07-28 22:33:38.678 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:38.722 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:33:38.723 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api)'
2025-07-28 22:33:38.723 +08:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 22:33:38.726 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Id", a0."AccessFailedCount", a0."Avatar", a0."ConcurrencyStamp", a0."CreatedAt", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LastLoginAt", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."NotificationPreferences", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."RefreshTokenExpiryTime", a0."Role", a0."SecurityStamp", a0."Status", a0."TwoFactorEnabled", a0."UserName", r."Id", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."RevokedAt", r."RevokedByIp", r."Token", r."UserId"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS a0
LEFT JOIN "RefreshTokens" AS r ON a0."Id" = r."UserId"
ORDER BY a0."Id"
2025-07-28 22:33:38.738 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "RevokedAt" = @p0
WHERE "Id" = @p1;
2025-07-28 22:33:38.739 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:33:38.740 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api) in 15.6889ms
2025-07-28 22:33:38.741 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api)'
2025-07-28 22:33:38.741 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/logout - 200 null application/json; charset=utf-8 63.5568ms
2025-07-28 22:33:40.534 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - null null
2025-07-28 22:33:40.536 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:40.537 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - 204 null null 2.2057ms
2025-07-28 22:33:40.538 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/login - application/json 61
2025-07-28 22:33:40.539 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:40.540 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 22:33:40.540 +08:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(CeceLearningPortal.Api.DTOs.LoginDto) on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 22:33:40.543 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-07-28 22:33:40.588 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?', @p2='?', @p0='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = DateTime), @p8='?', @p9='?', @p10='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "LastLoginAt" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2;
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "RevokedAt", "RevokedByIp", "Token", "UserId")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
2025-07-28 22:33:40.590 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.AuthResponseDto'.
2025-07-28 22:33:40.590 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api) in 49.3806ms
2025-07-28 22:33:40.591 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 22:33:40.592 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/login - 200 null application/json; charset=utf-8 53.308ms
2025-07-28 22:33:40.605 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 22:33:40.606 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:33:40.606 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:40.608 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:40.608 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 3.3229ms
2025-07-28 22:33:40.608 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 2.8441ms
2025-07-28 22:33:40.610 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:33:40.611 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:33:40.613 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:40.614 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:40.615 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:33:40.616 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:33:40.617 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:33:40.622 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:33:40.625 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:33:40.625 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 7.9144ms
2025-07-28 22:33:40.626 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:33:40.627 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 16.8007ms
2025-07-28 22:33:40.629 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - null null
2025-07-28 22:33:40.630 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:40.631 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - 204 null null 1.99ms
2025-07-28 22:33:40.633 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - application/json null
2025-07-28 22:33:40.634 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:40.635 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:33:40.637 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - 404 0 null 4.1405ms
2025-07-28 22:33:40.639 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats, Response status code: 404
2025-07-28 22:33:40.640 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 22:33:40.642 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:40.642 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 1.6803ms
2025-07-28 22:33:40.644 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 22:33:40.645 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:40.646 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:33:40.647 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:33:40.648 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:33:40.650 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:33:40.652 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:33:40.653 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 4.7496ms
2025-07-28 22:33:40.654 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:33:40.655 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - 200 null application/json; charset=utf-8 11.1109ms
2025-07-28 22:33:40.660 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:33:40.661 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:33:40.662 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-28 22:33:40.662 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 403 0 null 51.0053ms
2025-07-28 22:33:43.202 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:33:43.204 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:43.205 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:33:43.206 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:33:43.207 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:33:43.213 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:33:43.215 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:33:43.215 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 8.0225ms
2025-07-28 22:33:43.216 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:33:43.217 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 14.7094ms
2025-07-28 22:33:43.218 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:33:43.219 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:43.220 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:33:43.221 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:33:43.222 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-28 22:33:43.222 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 403 0 null 4.3144ms
2025-07-28 22:33:43.225 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:33:43.226 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:43.227 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:33:43.228 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:33:43.229 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-28 22:33:43.229 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 22:33:43.229 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 403 0 null 4.4739ms
2025-07-28 22:33:43.230 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 22:33:43.231 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:43.233 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:43.233 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 4.39ms
2025-07-28 22:33:43.234 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 3.842ms
2025-07-28 22:33:43.235 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 22:33:43.237 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 22:33:43.238 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:43.239 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:33:43.240 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:33:43.240 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:33:43.241 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api)'
2025-07-28 22:33:43.242 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetInstructorAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:33:43.243 +08:00 [INF] Route matched with {action = "GetInstructorRevenue", controller = "Revenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetInstructorRevenue(System.String) on controller CeceLearningPortal.Api.Controllers.RevenueController (CeceLearningPortal.Api).
2025-07-28 22:33:43.245 +08:00 [INF] Route matched with {action = "GetInstructorAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetInstructorAnalytics(System.String) on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:33:43.245 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__p_0
LIMIT 1
2025-07-28 22:33:43.247 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__instructorId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
FROM "Courses" AS c
WHERE c."InstructorId" = @__instructorId_0
2025-07-28 22:33:43.250 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:33:43.251 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-28 22:33:43.253 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:33:43.254 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:33:43.256 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:33:43.257 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:33:43.259 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:33:43.260 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:33:43.261 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:33:43.263 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:33:43.263 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__instructorId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", s."Id", s."AverageQuizScore", s."CertificateIssued", s."CertificateUrl", s."CompletedAt", s."CompletedLessons", s."CourseId", s."EnrolledAt", s."LastAccessedDate", s."ProgressPercentage", s."QuizCount", s."StudentId", s."TotalTimeSpent", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status", s."TwoFactorEnabled", s."UserName", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId"
FROM "Courses" AS c
LEFT JOIN (
    SELECT e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
    FROM "Enrollments" AS e
    INNER JOIN "AspNetUsers" AS a ON e."StudentId" = a."Id"
) AS s ON c."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c."Id" = r."CourseId"
WHERE c."InstructorId" = @__instructorId_0
ORDER BY c."Id", s."Id", s."Id0"
2025-07-28 22:33:43.264 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:33:43.266 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:33:43.267 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:33:43.269 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:33:43.271 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:33:43.271 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__instructorId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
WHERE c."InstructorId" = @__instructorId_0 AND p."Status" = 'Completed'
2025-07-28 22:33:43.272 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:33:43.274 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:33:43.276 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:33:43.277 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:33:43.278 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__instructorId_0='?', @__twelveMonthsAgo_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Year", s."Month", COALESCE(sum(s."Amount"), 0.0) AS "Revenue"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = @__instructorId_0 AND p."Status" = 'Completed' AND p."CreatedAt" >= @__twelveMonthsAgo_1
) AS s
GROUP BY s."Year", s."Month"
ORDER BY s."Year", s."Month"
2025-07-28 22:33:43.279 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:33:43.281 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:33:43.282 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.InstructorRevenueDto'.
2025-07-28 22:33:43.282 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api) in 38.4889ms
2025-07-28 22:33:43.283 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api)'
2025-07-28 22:33:43.283 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 200 null application/json; charset=utf-8 48.1016ms
2025-07-28 22:33:43.284 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 22:33:43.286 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 22:33:43.288 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 22:33:43.289 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 22:33:43.290 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 22:33:43.449 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__instructorId_0='?', @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."FullName", s."Title", s."EnrolledAt"
FROM (
    SELECT e."EnrolledAt", e."StudentId", c."Title"
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c ON e."CourseId" = c."Id"
    WHERE c."InstructorId" = @__instructorId_0
    ORDER BY e."EnrolledAt" DESC
    LIMIT @__p_1
) AS s
INNER JOIN "AspNetUsers" AS a ON s."StudentId" = a."Id"
ORDER BY s."EnrolledAt" DESC
2025-07-28 22:33:43.454 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__instructorId_0='?', @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."FullName", s."Title", s."CreatedAt", s."Rating"
FROM (
    SELECT r."CreatedAt", r."Rating", r."StudentId", c."Title"
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c ON r."CourseId" = c."Id"
    WHERE c."InstructorId" = @__instructorId_0
    ORDER BY r."CreatedAt" DESC
    LIMIT @__p_1
) AS s
INNER JOIN "AspNetUsers" AS a ON s."StudentId" = a."Id"
ORDER BY s."CreatedAt" DESC
2025-07-28 22:33:43.456 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`5[[<>f__AnonymousType5`6[[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:33:43.462 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetInstructorAnalytics (CeceLearningPortal.Api) in 215.9857ms
2025-07-28 22:33:43.462 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetInstructorAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:33:43.463 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 200 null application/json; charset=utf-8 225.9462ms
2025-07-28 22:36:32.140 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:36:32.142 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:36:32.143 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 2.8404ms
2025-07-28 22:36:32.145 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:36:32.147 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:36:32.149 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:36:32.151 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:36:32.151 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:36:32.155 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:36:32.158 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:36:32.159 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 6.8659ms
2025-07-28 22:36:32.160 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:36:32.161 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 16.1433ms
2025-07-28 22:36:32.161 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:36:32.165 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:36:32.165 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 22:36:32.166 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:36:32.167 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:36:32.168 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:36:32.169 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 3.733ms
2025-07-28 22:36:32.169 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:36:32.172 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:36:32.174 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:36:32.176 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:36:32.176 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:36:32.178 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:36:32.179 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:36:32.180 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 6.6471ms
2025-07-28 22:36:32.180 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-28 22:36:32.181 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:36:32.181 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 403 0 null 9.5798ms
2025-07-28 22:36:32.182 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 20.6156ms
2025-07-28 22:36:32.183 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:36:32.186 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:36:32.188 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:36:32.190 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:36:32.190 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-28 22:36:32.191 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 403 0 null 7.9493ms
2025-07-28 22:36:32.193 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:36:32.194 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:36:32.195 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:36:32.197 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:36:32.197 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-28 22:36:32.198 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 403 0 null 4.923ms
2025-07-28 22:36:32.199 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:36:32.200 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:36:32.202 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:36:32.203 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:36:32.203 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 22:36:32.204 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-28 22:36:32.204 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 22:36:32.205 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:36:32.205 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 403 0 null 6.1912ms
2025-07-28 22:36:32.207 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:36:32.207 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 3.4402ms
2025-07-28 22:36:32.209 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 4.79ms
2025-07-28 22:36:32.210 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 22:36:32.212 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 22:36:32.213 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:36:32.214 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:36:32.215 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:36:32.215 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:36:32.216 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetInstructorAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:36:32.217 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api)'
2025-07-28 22:36:32.218 +08:00 [INF] Route matched with {action = "GetInstructorAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetInstructorAnalytics(System.String) on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:36:32.218 +08:00 [INF] Route matched with {action = "GetInstructorRevenue", controller = "Revenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetInstructorRevenue(System.String) on controller CeceLearningPortal.Api.Controllers.RevenueController (CeceLearningPortal.Api).
2025-07-28 22:36:32.221 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__p_0
LIMIT 1
2025-07-28 22:36:32.221 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__instructorId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", s."Id", s."AverageQuizScore", s."CertificateIssued", s."CertificateUrl", s."CompletedAt", s."CompletedLessons", s."CourseId", s."EnrolledAt", s."LastAccessedDate", s."ProgressPercentage", s."QuizCount", s."StudentId", s."TotalTimeSpent", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status", s."TwoFactorEnabled", s."UserName", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId"
FROM "Courses" AS c
LEFT JOIN (
    SELECT e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
    FROM "Enrollments" AS e
    INNER JOIN "AspNetUsers" AS a ON e."StudentId" = a."Id"
) AS s ON c."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c."Id" = r."CourseId"
WHERE c."InstructorId" = @__instructorId_0
ORDER BY c."Id", s."Id", s."Id0"
2025-07-28 22:36:32.222 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__instructorId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
FROM "Courses" AS c
WHERE c."InstructorId" = @__instructorId_0
2025-07-28 22:36:32.224 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__instructorId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
WHERE c."InstructorId" = @__instructorId_0 AND p."Status" = 'Completed'
2025-07-28 22:36:32.225 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:36:32.226 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__instructorId_0='?', @__twelveMonthsAgo_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Year", s."Month", COALESCE(sum(s."Amount"), 0.0) AS "Revenue"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = @__instructorId_0 AND p."Status" = 'Completed' AND p."CreatedAt" >= @__twelveMonthsAgo_1
) AS s
GROUP BY s."Year", s."Month"
ORDER BY s."Year", s."Month"
2025-07-28 22:36:32.227 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:36:32.227 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 22:36:32.228 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:36:32.229 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 22:36:32.230 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:36:32.231 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 22:36:32.233 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:36:32.233 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 22:36:32.235 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:36:32.235 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 22:36:32.237 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:36:32.238 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__instructorId_0='?', @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."FullName", s."Title", s."EnrolledAt"
FROM (
    SELECT e."EnrolledAt", e."StudentId", c."Title"
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c ON e."CourseId" = c."Id"
    WHERE c."InstructorId" = @__instructorId_0
    ORDER BY e."EnrolledAt" DESC
    LIMIT @__p_1
) AS s
INNER JOIN "AspNetUsers" AS a ON s."StudentId" = a."Id"
ORDER BY s."EnrolledAt" DESC
2025-07-28 22:36:32.239 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:36:32.241 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__instructorId_0='?', @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."FullName", s."Title", s."CreatedAt", s."Rating"
FROM (
    SELECT r."CreatedAt", r."Rating", r."StudentId", c."Title"
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c ON r."CourseId" = c."Id"
    WHERE c."InstructorId" = @__instructorId_0
    ORDER BY r."CreatedAt" DESC
    LIMIT @__p_1
) AS s
INNER JOIN "AspNetUsers" AS a ON s."StudentId" = a."Id"
ORDER BY s."CreatedAt" DESC
2025-07-28 22:36:32.242 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:36:32.243 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`5[[<>f__AnonymousType5`6[[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:36:32.245 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:36:32.245 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetInstructorAnalytics (CeceLearningPortal.Api) in 25.8376ms
2025-07-28 22:36:32.246 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:36:32.247 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetInstructorAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:36:32.248 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:36:32.248 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 200 null application/json; charset=utf-8 37.8057ms
2025-07-28 22:36:32.250 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:36:32.252 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:36:32.254 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:36:32.255 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:36:32.257 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:36:32.258 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:36:32.260 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:36:32.261 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:36:32.262 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.InstructorRevenueDto'.
2025-07-28 22:36:32.263 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api) in 42.6586ms
2025-07-28 22:36:32.263 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api)'
2025-07-28 22:36:32.264 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 200 null application/json; charset=utf-8 52.2181ms
2025-07-28 22:38:18.931 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - null null
2025-07-28 22:38:18.932 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:18.932 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - 204 null null 1.52ms
2025-07-28 22:38:18.933 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/logout - application/json 0
2025-07-28 22:38:18.934 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:18.936 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:38:18.937 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api)'
2025-07-28 22:38:18.938 +08:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 22:38:18.939 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Id", a0."AccessFailedCount", a0."Avatar", a0."ConcurrencyStamp", a0."CreatedAt", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LastLoginAt", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."NotificationPreferences", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."RefreshTokenExpiryTime", a0."Role", a0."SecurityStamp", a0."Status", a0."TwoFactorEnabled", a0."UserName", r."Id", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."RevokedAt", r."RevokedByIp", r."Token", r."UserId"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS a0
LEFT JOIN "RefreshTokens" AS r ON a0."Id" = r."UserId"
ORDER BY a0."Id"
2025-07-28 22:38:18.943 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "RevokedAt" = @p0
WHERE "Id" = @p1;
UPDATE "RefreshTokens" SET "RevokedAt" = @p2
WHERE "Id" = @p3;
2025-07-28 22:38:18.954 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:38:18.954 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api) in 15.8389ms
2025-07-28 22:38:18.955 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api)'
2025-07-28 22:38:18.956 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/logout - 200 null application/json; charset=utf-8 22.2267ms
2025-07-28 22:38:18.988 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:38:18.990 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:18.991 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 2.2195ms
2025-07-28 22:38:18.994 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:38:18.995 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:18.996 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:38:18.997 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:38:19.000 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:38:19.002 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:38:19.003 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 5.5445ms
2025-07-28 22:38:19.004 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:38:19.004 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 10.6393ms
2025-07-28 22:38:19.020 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 22:38:19.022 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:19.023 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 2.3435ms
2025-07-28 22:38:19.024 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:38:19.026 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:19.027 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:38:19.027 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 22:38:19.028 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 401 0 null 3.313ms
2025-07-28 22:38:21.473 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - null null
2025-07-28 22:38:21.474 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:21.475 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - 204 null null 1.9152ms
2025-07-28 22:38:21.476 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/login - application/json 51
2025-07-28 22:38:21.477 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:21.478 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 22:38:21.478 +08:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(CeceLearningPortal.Api.DTOs.LoginDto) on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 22:38:21.480 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-07-28 22:38:21.526 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?', @p2='?', @p0='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = DateTime), @p8='?', @p9='?', @p10='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "LastLoginAt" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2;
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "RevokedAt", "RevokedByIp", "Token", "UserId")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
2025-07-28 22:38:21.528 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.AuthResponseDto'.
2025-07-28 22:38:21.528 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api) in 49.4755ms
2025-07-28 22:38:21.529 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 22:38:21.530 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/login - 200 null application/json; charset=utf-8 53.5761ms
2025-07-28 22:38:21.545 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:38:21.546 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 22:38:21.546 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:21.547 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:21.548 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 3.025ms
2025-07-28 22:38:21.548 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 2.7087ms
2025-07-28 22:38:21.550 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:38:21.552 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:38:21.553 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:21.554 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:21.555 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:38:21.555 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:38:21.556 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:38:21.557 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:38:21.558 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:38:21.558 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:38:21.561 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 22:38:21.561 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:38:21.562 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 22:38:21.564 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:38:21.565 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 22:38:21.565 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 5.9464ms
2025-07-28 22:38:21.566 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 22:38:21.567 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:38:21.568 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 18.0432ms
2025-07-28 22:38:21.569 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 22:38:21.572 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 22:38:21.573 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 22:38:21.575 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 22:38:21.576 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 22:38:21.578 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 22:38:21.579 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`6[[<>f__AnonymousType7`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:38:21.580 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 19.7402ms
2025-07-28 22:38:21.581 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:38:21.581 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 29.6609ms
2025-07-28 22:38:23.570 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:38:23.572 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:23.573 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:38:23.574 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:38:23.575 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:38:23.576 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 22:38:23.577 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 22:38:23.579 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 22:38:23.580 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 22:38:23.582 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 22:38:23.585 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 22:38:23.586 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 22:38:23.587 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 22:38:23.589 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 22:38:23.590 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 22:38:23.591 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`6[[<>f__AnonymousType7`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:38:23.592 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 16.1941ms
2025-07-28 22:38:23.593 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:38:23.593 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 22.8349ms
2025-07-28 22:38:29.416 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:38:29.417 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.418 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 1.583ms
2025-07-28 22:38:29.419 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:38:29.420 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.422 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:38:29.423 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:38:29.424 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:38:29.427 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:38:29.429 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:38:29.430 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 5.5156ms
2025-07-28 22:38:29.431 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:38:29.431 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 11.8411ms
2025-07-28 22:38:29.433 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - null null
2025-07-28 22:38:29.433 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - null null
2025-07-28 22:38:29.433 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - null null
2025-07-28 22:38:29.434 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.434 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - null null
2025-07-28 22:38:29.434 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - null null
2025-07-28 22:38:29.435 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - null null
2025-07-28 22:38:29.435 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.436 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.436 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - 204 null null 3.5805ms
2025-07-28 22:38:29.437 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.438 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.439 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.440 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - 204 null null 6.6083ms
2025-07-28 22:38:29.440 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - 204 null null 6.5214ms
2025-07-28 22:38:29.441 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - null null
2025-07-28 22:38:29.442 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - 204 null null 7.5103ms
2025-07-28 22:38:29.442 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - 204 null null 7.7888ms
2025-07-28 22:38:29.443 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - 204 null null 7.8966ms
2025-07-28 22:38:29.444 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - null null
2025-07-28 22:38:29.445 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - null null
2025-07-28 22:38:29.446 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.447 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - null null
2025-07-28 22:38:29.449 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - null null
2025-07-28 22:38:29.450 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - null null
2025-07-28 22:38:29.451 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.452 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.452 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - 204 null null 10.8079ms
2025-07-28 22:38:29.453 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.454 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.455 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.455 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - 204 null null 11.5254ms
2025-07-28 22:38:29.456 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - 204 null null 10.7484ms
2025-07-28 22:38:29.457 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/73 - application/json null
2025-07-28 22:38:29.457 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - 204 null null 9.9507ms
2025-07-28 22:38:29.458 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - 204 null null 9.0364ms
2025-07-28 22:38:29.458 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - 204 null null 8.3391ms
2025-07-28 22:38:29.460 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/70 - application/json null
2025-07-28 22:38:29.461 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/66 - application/json null
2025-07-28 22:38:29.462 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.463 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/72 - application/json null
2025-07-28 22:38:29.464 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/69 - application/json null
2025-07-28 22:38:29.465 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/65 - application/json null
2025-07-28 22:38:29.466 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.467 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.469 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:38:29.469 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.470 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.471 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.472 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:38:29.472 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.473 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:38:29.474 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.475 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:38:29.476 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.477 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:38:29.478 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:38:29.479 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:38:29.481 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:38:29.482 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:38:29.484 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:38:29.485 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 7.3216ms
2025-07-28 22:38:29.486 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 6.654ms
2025-07-28 22:38:29.486 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.487 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.488 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/73 - 200 null application/json; charset=utf-8 30.8004ms
2025-07-28 22:38:29.489 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/70 - 200 null application/json; charset=utf-8 28.7103ms
2025-07-28 22:38:29.490 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/71 - application/json null
2025-07-28 22:38:29.493 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/68 - application/json null
2025-07-28 22:38:29.494 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.496 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.497 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:38:29.497 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:38:29.499 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.500 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.500 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:38:29.501 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:38:29.504 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:38:29.505 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:38:29.506 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:38:29.508 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:38:29.508 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 6.3736ms
2025-07-28 22:38:29.509 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 6.0296ms
2025-07-28 22:38:29.510 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.511 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.511 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/71 - 200 null application/json; charset=utf-8 20.9159ms
2025-07-28 22:38:29.512 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/68 - 200 null application/json; charset=utf-8 19.5241ms
2025-07-28 22:38:29.514 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/64 - application/json null
2025-07-28 22:38:29.515 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/67 - application/json null
2025-07-28 22:38:29.517 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.518 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.519 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:38:29.519 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:38:29.520 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.521 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.522 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:38:29.522 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:38:29.523 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:38:29.525 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:38:29.525 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.526 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:38:29.528 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:38:29.528 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:38:29.528 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:38:29.530 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:38:29.531 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:38:29.531 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 7.7736ms
2025-07-28 22:38:29.532 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.533 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 9.2718ms
2025-07-28 22:38:29.534 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.535 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.535 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:38:29.536 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.536 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:38:29.537 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/64 - 200 null application/json; charset=utf-8 22.5589ms
2025-07-28 22:38:29.538 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:38:29.538 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:38:29.538 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/67 - 200 null application/json; charset=utf-8 22.3574ms
2025-07-28 22:38:29.539 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:38:29.540 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/63 - application/json null
2025-07-28 22:38:29.540 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:38:29.542 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:38:29.543 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:38:29.544 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/62 - application/json null
2025-07-28 22:38:29.546 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:38:29.547 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.549 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:38:29.549 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 16.4629ms
2025-07-28 22:38:29.550 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 69.5005ms
2025-07-28 22:38:29.551 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:38:29.551 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.7483ms
2025-07-28 22:38:29.552 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.4182ms
2025-07-28 22:38:29.552 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:38:29.553 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.553 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.554 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:38:29.554 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.555 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.555 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.556 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/66 - 200 null application/json; charset=utf-8 94.8322ms
2025-07-28 22:38:29.556 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/72 - 200 null application/json; charset=utf-8 93.1807ms
2025-07-28 22:38:29.557 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.558 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/65 - 200 null application/json; charset=utf-8 92.2766ms
2025-07-28 22:38:29.558 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/69 - 200 null application/json; charset=utf-8 94.0884ms
2025-07-28 22:38:29.559 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:38:29.562 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:38:29.567 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:38:29.567 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:38:29.569 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:38:29.570 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:38:29.571 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 5.4944ms
2025-07-28 22:38:29.571 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 5.3352ms
2025-07-28 22:38:29.572 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.572 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:38:29.573 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/63 - 200 null application/json; charset=utf-8 32.928ms
2025-07-28 22:38:29.573 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/62 - 200 null application/json; charset=utf-8 29.0839ms
2025-07-28 22:39:55.922 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - null null
2025-07-28 22:39:55.923 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:39:55.924 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - 204 null null 1.7295ms
2025-07-28 22:39:55.925 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/logout - application/json 0
2025-07-28 22:39:55.926 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:39:55.928 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:39:55.929 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api)'
2025-07-28 22:39:55.929 +08:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 22:39:55.933 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Id", a0."AccessFailedCount", a0."Avatar", a0."ConcurrencyStamp", a0."CreatedAt", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LastLoginAt", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."NotificationPreferences", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."RefreshTokenExpiryTime", a0."Role", a0."SecurityStamp", a0."Status", a0."TwoFactorEnabled", a0."UserName", r."Id", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."RevokedAt", r."RevokedByIp", r."Token", r."UserId"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS a0
LEFT JOIN "RefreshTokens" AS r ON a0."Id" = r."UserId"
ORDER BY a0."Id"
2025-07-28 22:39:55.936 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "RevokedAt" = @p0
WHERE "Id" = @p1;
2025-07-28 22:39:55.937 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:39:55.937 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api) in 6.8882ms
2025-07-28 22:39:55.938 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api)'
2025-07-28 22:39:55.938 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/logout - 200 null application/json; charset=utf-8 13.1731ms
2025-07-28 22:39:57.826 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - null null
2025-07-28 22:39:57.828 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:39:57.828 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - 204 null null 1.8557ms
2025-07-28 22:39:57.829 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/login - application/json 61
2025-07-28 22:39:57.830 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:39:57.831 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 22:39:57.831 +08:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(CeceLearningPortal.Api.DTOs.LoginDto) on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 22:39:57.834 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-07-28 22:39:57.881 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?', @p2='?', @p0='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = DateTime), @p8='?', @p9='?', @p10='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "LastLoginAt" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2;
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "RevokedAt", "RevokedByIp", "Token", "UserId")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
2025-07-28 22:39:57.883 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.AuthResponseDto'.
2025-07-28 22:39:57.883 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api) in 51.1103ms
2025-07-28 22:39:57.884 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 22:39:57.884 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/login - 200 null application/json; charset=utf-8 55.0451ms
2025-07-28 22:39:57.898 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 22:39:57.899 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:39:57.900 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:39:57.901 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:39:57.901 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 3.0918ms
2025-07-28 22:39:57.902 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 2.9074ms
2025-07-28 22:39:57.903 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:39:57.904 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:39:57.906 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:39:57.907 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:39:57.908 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:39:57.908 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:39:57.909 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:39:57.910 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:39:57.911 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-28 22:39:57.911 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:39:57.912 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 403 0 null 8.4101ms
2025-07-28 22:39:57.915 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:39:57.917 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:39:57.918 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 5.4504ms
2025-07-28 22:39:57.919 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:39:57.919 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 14.7546ms
2025-07-28 22:39:57.921 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - null null
2025-07-28 22:39:57.922 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:39:57.922 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - 204 null null 1.5813ms
2025-07-28 22:39:57.924 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - application/json null
2025-07-28 22:39:57.925 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:39:57.926 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:39:57.927 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - 404 0 null 3.515ms
2025-07-28 22:39:57.929 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats, Response status code: 404
2025-07-28 22:39:57.933 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 22:39:57.934 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:39:57.934 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 1.6239ms
2025-07-28 22:39:57.936 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 22:39:57.937 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:39:57.938 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:39:57.939 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:39:57.939 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:39:57.943 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:39:57.945 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:39:57.946 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 5.2795ms
2025-07-28 22:39:57.946 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:39:57.947 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - 200 null application/json; charset=utf-8 11.2579ms
2025-07-28 22:40:00.210 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:40:00.211 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:00.214 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:00.215 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:40:00.215 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:00.221 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:40:00.223 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:40:00.224 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 7.7046ms
2025-07-28 22:40:00.224 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:40:00.225 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 14.928ms
2025-07-28 22:40:00.226 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:40:00.228 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:00.229 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:00.230 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:40:00.230 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-28 22:40:00.231 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 403 0 null 4.535ms
2025-07-28 22:40:00.234 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:40:00.235 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:00.236 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:00.237 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:40:00.238 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-28 22:40:00.238 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 22:40:00.238 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 22:40:00.238 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 403 0 null 4.6514ms
2025-07-28 22:40:00.239 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:00.241 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:00.242 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 4.5953ms
2025-07-28 22:40:00.243 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 4.5282ms
2025-07-28 22:40:00.245 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 22:40:00.246 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 22:40:00.247 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:00.248 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:00.250 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:00.250 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:00.251 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api)'
2025-07-28 22:40:00.252 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetInstructorAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:40:00.252 +08:00 [INF] Route matched with {action = "GetInstructorRevenue", controller = "Revenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetInstructorRevenue(System.String) on controller CeceLearningPortal.Api.Controllers.RevenueController (CeceLearningPortal.Api).
2025-07-28 22:40:00.253 +08:00 [INF] Route matched with {action = "GetInstructorAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetInstructorAnalytics(System.String) on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:40:00.254 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__p_0
LIMIT 1
2025-07-28 22:40:00.256 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__instructorId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", s."Id", s."AverageQuizScore", s."CertificateIssued", s."CertificateUrl", s."CompletedAt", s."CompletedLessons", s."CourseId", s."EnrolledAt", s."LastAccessedDate", s."ProgressPercentage", s."QuizCount", s."StudentId", s."TotalTimeSpent", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status", s."TwoFactorEnabled", s."UserName", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId"
FROM "Courses" AS c
LEFT JOIN (
    SELECT e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
    FROM "Enrollments" AS e
    INNER JOIN "AspNetUsers" AS a ON e."StudentId" = a."Id"
) AS s ON c."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c."Id" = r."CourseId"
WHERE c."InstructorId" = @__instructorId_0
ORDER BY c."Id", s."Id", s."Id0"
2025-07-28 22:40:00.257 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__instructorId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
FROM "Courses" AS c
WHERE c."InstructorId" = @__instructorId_0
2025-07-28 22:40:00.259 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__instructorId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
WHERE c."InstructorId" = @__instructorId_0 AND p."Status" = 'Completed'
2025-07-28 22:40:00.261 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:40:00.262 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__instructorId_0='?', @__twelveMonthsAgo_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Year", s."Month", COALESCE(sum(s."Amount"), 0.0) AS "Revenue"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = @__instructorId_0 AND p."Status" = 'Completed' AND p."CreatedAt" >= @__twelveMonthsAgo_1
) AS s
GROUP BY s."Year", s."Month"
ORDER BY s."Year", s."Month"
2025-07-28 22:40:00.264 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 22:40:00.264 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:40:00.265 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 22:40:00.266 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:40:00.267 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 22:40:00.268 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:40:00.268 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 22:40:00.270 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:40:00.270 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 22:40:00.272 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:40:00.273 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:40:00.274 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__instructorId_0='?', @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."FullName", s."Title", s."EnrolledAt"
FROM (
    SELECT e."EnrolledAt", e."StudentId", c."Title"
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c ON e."CourseId" = c."Id"
    WHERE c."InstructorId" = @__instructorId_0
    ORDER BY e."EnrolledAt" DESC
    LIMIT @__p_1
) AS s
INNER JOIN "AspNetUsers" AS a ON s."StudentId" = a."Id"
ORDER BY s."EnrolledAt" DESC
2025-07-28 22:40:00.275 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:40:00.276 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__instructorId_0='?', @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."FullName", s."Title", s."CreatedAt", s."Rating"
FROM (
    SELECT r."CreatedAt", r."Rating", r."StudentId", c."Title"
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c ON r."CourseId" = c."Id"
    WHERE c."InstructorId" = @__instructorId_0
    ORDER BY r."CreatedAt" DESC
    LIMIT @__p_1
) AS s
INNER JOIN "AspNetUsers" AS a ON s."StudentId" = a."Id"
ORDER BY s."CreatedAt" DESC
2025-07-28 22:40:00.277 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:40:00.277 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`5[[<>f__AnonymousType5`6[[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:40:00.279 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:40:00.279 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetInstructorAnalytics (CeceLearningPortal.Api) in 24.6685ms
2025-07-28 22:40:00.281 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:40:00.281 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetInstructorAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:40:00.282 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:40:00.282 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 200 null application/json; charset=utf-8 36.4423ms
2025-07-28 22:40:00.284 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:40:00.286 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:40:00.287 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:40:00.289 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:40:00.290 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."StudentId" = p."UserId" AND e."CourseId" = @__courseId_0) AND p."Status" = 'Completed' AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = p."UserId" AND s."Status" = 'Active' AND s."StartDate" <= p."CreatedAt")
2025-07-28 22:40:00.292 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."BillingCycle", s."CreatedAt", s."EndDate", s."NextBillingDate", s."PlanName", s."Price", s."StartDate", s."Status", s."StripeSubscriptionId", s."SubscriptionPlanId", s."UpdatedAt", s."UserId", s0."Id", s0."CreatedAt", s0."Description", s0."Features", s0."HasUnlimitedAccess", s0."IsActive", s0."MaxCourseAccess", s0."MonthlyPrice", s0."Name", s0."UpdatedAt", s0."YearlyPrice"
FROM "Subscriptions" AS s
INNER JOIN "SubscriptionPlans" AS s0 ON s."SubscriptionPlanId" = s0."Id"
WHERE s."Status" = 'Active' AND EXISTS (
    SELECT 1
    FROM "Enrollments" AS e
    WHERE e."CourseId" = @__courseId_0 AND e."StudentId" = s."UserId" AND e."EnrolledAt" >= s."StartDate")
2025-07-28 22:40:00.293 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 22:40:00.294 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 22:40:00.295 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.InstructorRevenueDto'.
2025-07-28 22:40:00.296 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api) in 42.1346ms
2025-07-28 22:40:00.296 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api)'
2025-07-28 22:40:00.297 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 200 null application/json; charset=utf-8 52.3238ms
2025-07-28 22:40:07.980 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - null null
2025-07-28 22:40:07.981 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:07.981 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - 204 null null 1.5179ms
2025-07-28 22:40:07.983 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/logout - application/json 0
2025-07-28 22:40:07.984 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:07.985 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:07.986 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api)'
2025-07-28 22:40:07.986 +08:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 22:40:07.988 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Id", a0."AccessFailedCount", a0."Avatar", a0."ConcurrencyStamp", a0."CreatedAt", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LastLoginAt", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."NotificationPreferences", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."RefreshTokenExpiryTime", a0."Role", a0."SecurityStamp", a0."Status", a0."TwoFactorEnabled", a0."UserName", r."Id", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."RevokedAt", r."RevokedByIp", r."Token", r."UserId"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS a0
LEFT JOIN "RefreshTokens" AS r ON a0."Id" = r."UserId"
ORDER BY a0."Id"
2025-07-28 22:40:08.000 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "RevokedAt" = @p0
WHERE "Id" = @p1;
2025-07-28 22:40:08.001 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:40:08.002 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api) in 14.4712ms
2025-07-28 22:40:08.002 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api)'
2025-07-28 22:40:08.003 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/logout - 200 null application/json; charset=utf-8 20.1515ms
2025-07-28 22:40:08.030 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:40:08.031 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:08.032 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 1.8638ms
2025-07-28 22:40:08.033 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:40:08.035 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:08.035 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:40:08.036 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:08.039 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:40:08.041 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:40:08.042 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 5.4648ms
2025-07-28 22:40:08.043 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:40:08.044 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 10.3085ms
2025-07-28 22:40:08.054 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 22:40:08.055 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:08.056 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 1.8657ms
2025-07-28 22:40:08.057 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:40:08.059 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:08.059 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 22:40:08.060 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 22:40:08.060 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 401 0 null 2.8577ms
2025-07-28 22:40:09.710 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - null null
2025-07-28 22:40:09.712 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:09.712 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - 204 null null 2.0145ms
2025-07-28 22:40:09.714 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/login - application/json 51
2025-07-28 22:40:09.715 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:09.715 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 22:40:09.715 +08:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(CeceLearningPortal.Api.DTOs.LoginDto) on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 22:40:09.717 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-07-28 22:40:09.764 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?', @p2='?', @p0='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = DateTime), @p8='?', @p9='?', @p10='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "LastLoginAt" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2;
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "RevokedAt", "RevokedByIp", "Token", "UserId")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
2025-07-28 22:40:09.765 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.AuthResponseDto'.
2025-07-28 22:40:09.766 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api) in 49.7686ms
2025-07-28 22:40:09.767 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 22:40:09.767 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/login - 200 null application/json; charset=utf-8 53.4243ms
2025-07-28 22:40:09.781 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:40:09.781 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 22:40:09.782 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:09.783 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:09.784 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 2.822ms
2025-07-28 22:40:09.784 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 2.9834ms
2025-07-28 22:40:09.786 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:40:09.787 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:40:09.788 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:09.789 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:09.790 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:09.790 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:09.792 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:40:09.792 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:40:09.793 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:40:09.794 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:09.795 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 22:40:09.797 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 22:40:09.798 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 22:40:09.799 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:40:09.799 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 22:40:09.801 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:40:09.802 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 6.6258ms
2025-07-28 22:40:09.803 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:40:09.803 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 17.7716ms
2025-07-28 22:40:09.804 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 22:40:09.807 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 22:40:09.808 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 22:40:09.810 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 22:40:09.811 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 22:40:09.813 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 22:40:09.814 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`6[[<>f__AnonymousType7`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:40:09.815 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 20.2017ms
2025-07-28 22:40:09.816 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:40:09.816 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 29.3631ms
2025-07-28 22:40:11.598 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:40:11.600 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:11.601 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:11.602 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:40:11.603 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:40:11.604 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 22:40:11.605 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 22:40:11.606 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 22:40:11.607 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 22:40:11.609 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 22:40:11.612 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 22:40:11.614 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 22:40:11.615 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 22:40:11.617 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 22:40:11.618 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 22:40:11.619 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`6[[<>f__AnonymousType7`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:40:11.620 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 16.3094ms
2025-07-28 22:40:11.620 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:40:11.621 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 22.1834ms
2025-07-28 22:40:16.741 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:40:16.743 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.743 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 1.7139ms
2025-07-28 22:40:16.745 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:40:16.746 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.747 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:16.748 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:40:16.749 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:16.752 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:40:16.754 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:40:16.755 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 5.2062ms
2025-07-28 22:40:16.755 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:40:16.756 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 11.2164ms
2025-07-28 22:40:16.757 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - null null
2025-07-28 22:40:16.757 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - null null
2025-07-28 22:40:16.758 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - null null
2025-07-28 22:40:16.758 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - null null
2025-07-28 22:40:16.758 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - null null
2025-07-28 22:40:16.758 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - null null
2025-07-28 22:40:16.759 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.760 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.761 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.762 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.763 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.764 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.765 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - 204 null null 7.4837ms
2025-07-28 22:40:16.765 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - 204 null null 7.5116ms
2025-07-28 22:40:16.765 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - 204 null null 7.722ms
2025-07-28 22:40:16.766 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - 204 null null 7.7092ms
2025-07-28 22:40:16.766 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - 204 null null 7.9769ms
2025-07-28 22:40:16.767 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - 204 null null 8.5053ms
2025-07-28 22:40:16.768 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - null null
2025-07-28 22:40:16.769 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - null null
2025-07-28 22:40:16.770 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - null null
2025-07-28 22:40:16.772 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - null null
2025-07-28 22:40:16.773 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - null null
2025-07-28 22:40:16.774 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - null null
2025-07-28 22:40:16.775 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.776 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.777 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.778 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.779 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.780 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.780 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - 204 null null 12.2161ms
2025-07-28 22:40:16.780 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - 204 null null 11.3535ms
2025-07-28 22:40:16.781 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - 204 null null 10.5155ms
2025-07-28 22:40:16.781 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - 204 null null 9.9349ms
2025-07-28 22:40:16.782 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - 204 null null 9.1638ms
2025-07-28 22:40:16.782 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - 204 null null 8.3496ms
2025-07-28 22:40:16.784 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/70 - application/json null
2025-07-28 22:40:16.785 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/73 - application/json null
2025-07-28 22:40:16.786 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/66 - application/json null
2025-07-28 22:40:16.787 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/72 - application/json null
2025-07-28 22:40:16.788 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/69 - application/json null
2025-07-28 22:40:16.789 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/65 - application/json null
2025-07-28 22:40:16.790 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.791 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.792 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.793 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.794 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.795 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.797 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:16.797 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:16.797 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:16.797 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:16.799 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.800 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.801 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.802 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.802 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:16.802 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:16.803 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:16.803 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:16.821 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:16.823 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:16.824 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:16.824 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:16.825 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:16.826 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:16.828 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:16.830 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:16.831 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 26.5141ms
2025-07-28 22:40:16.831 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 26.2847ms
2025-07-28 22:40:16.832 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 10.5009ms
2025-07-28 22:40:16.833 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 10.1083ms
2025-07-28 22:40:16.833 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.834 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.835 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.835 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.836 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/73 - 200 null application/json; charset=utf-8 50.825ms
2025-07-28 22:40:16.836 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/70 - 200 null application/json; charset=utf-8 52.5919ms
2025-07-28 22:40:16.837 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/66 - 200 null application/json; charset=utf-8 50.7539ms
2025-07-28 22:40:16.837 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/72 - 200 null application/json; charset=utf-8 50.085ms
2025-07-28 22:40:16.838 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/71 - application/json null
2025-07-28 22:40:16.840 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/68 - application/json null
2025-07-28 22:40:16.841 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/64 - application/json null
2025-07-28 22:40:16.842 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/67 - application/json null
2025-07-28 22:40:16.843 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:16.843 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.844 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.845 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.846 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:16.846 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.847 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.849 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:16.849 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:16.849 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:16.850 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.851 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:16.851 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:16.851 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.852 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.853 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.854 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:16.854 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.856 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:16.856 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:16.857 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:16.858 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:16.860 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:16.860 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:16.861 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:16.862 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:16.862 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:16.863 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:16.863 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:16.865 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:16.866 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:16.868 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:16.869 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:16.871 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:16.871 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.5094ms
2025-07-28 22:40:16.872 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 16.4173ms
2025-07-28 22:40:16.872 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.9358ms
2025-07-28 22:40:16.873 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.5333ms
2025-07-28 22:40:16.873 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 16.1097ms
2025-07-28 22:40:16.874 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.5865ms
2025-07-28 22:40:16.875 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.875 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.876 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.876 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.877 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.877 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.878 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/71 - 200 null application/json; charset=utf-8 39.2319ms
2025-07-28 22:40:16.878 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/69 - 200 null application/json; charset=utf-8 89.9054ms
2025-07-28 22:40:16.879 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/68 - 200 null application/json; charset=utf-8 39.1513ms
2025-07-28 22:40:16.879 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/64 - 200 null application/json; charset=utf-8 38.4075ms
2025-07-28 22:40:16.880 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/65 - 200 null application/json; charset=utf-8 90.4273ms
2025-07-28 22:40:16.881 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/67 - 200 null application/json; charset=utf-8 38.3614ms
2025-07-28 22:40:16.882 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/63 - application/json null
2025-07-28 22:40:16.884 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/62 - application/json null
2025-07-28 22:40:16.890 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.891 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:16.892 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:16.892 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:16.893 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.894 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.894 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:16.895 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:16.898 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:16.898 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:16.899 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:16.901 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:16.901 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 5.3198ms
2025-07-28 22:40:16.902 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 5.1008ms
2025-07-28 22:40:16.902 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.903 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:16.903 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/63 - 200 null application/json; charset=utf-8 20.6554ms
2025-07-28 22:40:16.904 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/62 - 200 null application/json; charset=utf-8 19.7155ms
2025-07-28 22:40:23.559 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:40:23.560 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.560 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 1.6284ms
2025-07-28 22:40:23.562 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:40:23.563 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.564 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:23.565 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:40:23.566 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:23.570 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:40:23.572 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:40:23.573 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 6.3311ms
2025-07-28 22:40:23.574 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:40:23.574 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 12.5342ms
2025-07-28 22:40:23.576 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - null null
2025-07-28 22:40:23.576 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - null null
2025-07-28 22:40:23.576 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - null null
2025-07-28 22:40:23.576 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - null null
2025-07-28 22:40:23.576 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - null null
2025-07-28 22:40:23.576 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - null null
2025-07-28 22:40:23.577 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.578 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.579 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.580 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.581 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.582 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.583 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - 204 null null 7.0864ms
2025-07-28 22:40:23.583 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - 204 null null 7.5254ms
2025-07-28 22:40:23.584 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - 204 null null 7.8365ms
2025-07-28 22:40:23.584 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - 204 null null 8.1431ms
2025-07-28 22:40:23.585 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - 204 null null 8.5742ms
2025-07-28 22:40:23.585 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - 204 null null 8.8176ms
2025-07-28 22:40:23.586 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - null null
2025-07-28 22:40:23.587 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - null null
2025-07-28 22:40:23.588 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - null null
2025-07-28 22:40:23.590 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - null null
2025-07-28 22:40:23.591 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - null null
2025-07-28 22:40:23.592 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - null null
2025-07-28 22:40:23.593 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.594 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.595 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.596 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.597 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.598 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.598 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - 204 null null 12.1002ms
2025-07-28 22:40:23.599 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - 204 null null 11.3655ms
2025-07-28 22:40:23.599 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - 204 null null 10.6313ms
2025-07-28 22:40:23.599 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - 204 null null 9.7602ms
2025-07-28 22:40:23.600 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - 204 null null 8.9685ms
2025-07-28 22:40:23.600 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - 204 null null 8.2183ms
2025-07-28 22:40:23.602 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/70 - application/json null
2025-07-28 22:40:23.603 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/66 - application/json null
2025-07-28 22:40:23.604 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/73 - application/json null
2025-07-28 22:40:23.605 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/72 - application/json null
2025-07-28 22:40:23.606 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/69 - application/json null
2025-07-28 22:40:23.607 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/65 - application/json null
2025-07-28 22:40:23.608 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.609 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.610 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.612 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.613 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.613 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.615 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:23.615 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:23.615 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:23.615 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:23.616 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:23.616 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:23.617 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.618 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.619 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.619 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.620 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.621 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.622 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:23.622 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:23.622 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:23.623 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:23.623 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:23.624 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:23.627 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:23.627 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:23.628 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:23.629 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:23.630 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:23.630 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:23.630 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:23.632 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:23.633 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:23.635 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:23.636 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:23.638 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:23.638 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.7794ms
2025-07-28 22:40:23.639 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.5852ms
2025-07-28 22:40:23.639 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.4344ms
2025-07-28 22:40:23.640 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.168ms
2025-07-28 22:40:23.641 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.7895ms
2025-07-28 22:40:23.641 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.4909ms
2025-07-28 22:40:23.642 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.642 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.643 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.643 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.644 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.645 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.645 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/70 - 200 null application/json; charset=utf-8 43.4547ms
2025-07-28 22:40:23.646 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/66 - 200 null application/json; charset=utf-8 42.957ms
2025-07-28 22:40:23.646 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/73 - 200 null application/json; charset=utf-8 42.2539ms
2025-07-28 22:40:23.647 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/72 - 200 null application/json; charset=utf-8 41.6386ms
2025-07-28 22:40:23.647 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/69 - 200 null application/json; charset=utf-8 41.1893ms
2025-07-28 22:40:23.648 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/65 - 200 null application/json; charset=utf-8 40.6598ms
2025-07-28 22:40:23.649 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/71 - application/json null
2025-07-28 22:40:23.651 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/68 - application/json null
2025-07-28 22:40:23.652 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/64 - application/json null
2025-07-28 22:40:23.653 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/67 - application/json null
2025-07-28 22:40:23.654 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/63 - application/json null
2025-07-28 22:40:23.655 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/62 - application/json null
2025-07-28 22:40:23.656 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.657 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.658 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.659 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.660 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.661 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:23.662 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:23.663 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:23.663 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:23.663 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:23.664 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:23.664 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:23.664 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.665 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.666 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.667 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.668 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.669 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.669 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:23.670 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:23.670 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:23.671 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:23.671 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:23.671 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:23.674 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:23.674 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:23.675 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:23.676 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:23.677 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:23.677 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:23.678 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:23.679 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:23.681 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:23.682 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:23.684 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:23.685 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:23.686 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.6325ms
2025-07-28 22:40:23.686 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.4148ms
2025-07-28 22:40:23.687 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.2959ms
2025-07-28 22:40:23.688 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.0943ms
2025-07-28 22:40:23.688 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.9116ms
2025-07-28 22:40:23.689 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.7219ms
2025-07-28 22:40:23.689 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.690 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.690 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.691 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.691 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.692 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:23.692 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/71 - 200 null application/json; charset=utf-8 42.849ms
2025-07-28 22:40:23.693 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/68 - 200 null application/json; charset=utf-8 41.9702ms
2025-07-28 22:40:23.693 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/64 - 200 null application/json; charset=utf-8 41.4452ms
2025-07-28 22:40:23.694 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/67 - 200 null application/json; charset=utf-8 40.896ms
2025-07-28 22:40:23.694 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/63 - 200 null application/json; charset=utf-8 40.199ms
2025-07-28 22:40:23.695 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/62 - 200 null application/json; charset=utf-8 39.5951ms
2025-07-28 22:40:37.678 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:40:37.679 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.680 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 1.5531ms
2025-07-28 22:40:37.681 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:40:37.682 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.683 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:37.684 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:40:37.685 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:37.690 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:40:37.693 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:40:37.694 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 7.7084ms
2025-07-28 22:40:37.694 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:40:37.695 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 14.2491ms
2025-07-28 22:40:37.697 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - null null
2025-07-28 22:40:37.697 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - null null
2025-07-28 22:40:37.697 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - null null
2025-07-28 22:40:37.697 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - null null
2025-07-28 22:40:37.697 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - null null
2025-07-28 22:40:37.697 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - null null
2025-07-28 22:40:37.698 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.699 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.700 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.701 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.702 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.703 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.703 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - 204 null null 6.4177ms
2025-07-28 22:40:37.703 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - 204 null null 6.7157ms
2025-07-28 22:40:37.704 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - 204 null null 6.9037ms
2025-07-28 22:40:37.704 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - 204 null null 7.2553ms
2025-07-28 22:40:37.705 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - 204 null null 7.5726ms
2025-07-28 22:40:37.705 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - 204 null null 7.8025ms
2025-07-28 22:40:37.706 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - null null
2025-07-28 22:40:37.707 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - null null
2025-07-28 22:40:37.708 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - null null
2025-07-28 22:40:37.710 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - null null
2025-07-28 22:40:37.711 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - null null
2025-07-28 22:40:37.712 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - null null
2025-07-28 22:40:37.713 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.714 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.715 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.716 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.717 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.718 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.718 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - 204 null null 12.2137ms
2025-07-28 22:40:37.719 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - 204 null null 11.4635ms
2025-07-28 22:40:37.719 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - 204 null null 10.7545ms
2025-07-28 22:40:37.720 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - 204 null null 10.1534ms
2025-07-28 22:40:37.720 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - 204 null null 9.1515ms
2025-07-28 22:40:37.720 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - 204 null null 8.2347ms
2025-07-28 22:40:37.722 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/70 - application/json null
2025-07-28 22:40:37.723 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/66 - application/json null
2025-07-28 22:40:37.724 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/73 - application/json null
2025-07-28 22:40:37.725 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/72 - application/json null
2025-07-28 22:40:37.727 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/69 - application/json null
2025-07-28 22:40:37.729 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/65 - application/json null
2025-07-28 22:40:37.731 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.732 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.734 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.735 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.736 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.737 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.739 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:37.739 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:37.739 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:37.740 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:37.740 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:37.740 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:37.741 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.742 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.744 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.745 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.746 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.747 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.748 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:37.748 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:37.748 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:37.749 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:37.749 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:37.750 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:37.753 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:37.754 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:37.755 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:37.756 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:37.757 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:37.758 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:37.758 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:37.759 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:37.761 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:37.762 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:37.764 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:37.766 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:37.766 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 15.3585ms
2025-07-28 22:40:37.767 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 14.8333ms
2025-07-28 22:40:37.767 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 14.3741ms
2025-07-28 22:40:37.768 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.8132ms
2025-07-28 22:40:37.768 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.3043ms
2025-07-28 22:40:37.769 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.0097ms
2025-07-28 22:40:37.770 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.770 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.771 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.771 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.772 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.772 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.773 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/70 - 200 null application/json; charset=utf-8 51.0313ms
2025-07-28 22:40:37.773 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/66 - 200 null application/json; charset=utf-8 50.4163ms
2025-07-28 22:40:37.774 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/73 - 200 null application/json; charset=utf-8 49.8699ms
2025-07-28 22:40:37.774 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/69 - 200 null application/json; charset=utf-8 47.5885ms
2025-07-28 22:40:37.775 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/72 - 200 null application/json; charset=utf-8 49.76ms
2025-07-28 22:40:37.775 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/65 - 200 null application/json; charset=utf-8 46.0468ms
2025-07-28 22:40:37.777 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/71 - application/json null
2025-07-28 22:40:37.778 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/68 - application/json null
2025-07-28 22:40:37.779 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/64 - application/json null
2025-07-28 22:40:37.781 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/67 - application/json null
2025-07-28 22:40:37.782 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/63 - application/json null
2025-07-28 22:40:37.783 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/62 - application/json null
2025-07-28 22:40:37.784 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.785 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.786 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.787 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.788 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.789 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:40:37.790 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:37.790 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:37.790 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:37.791 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:37.791 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:37.791 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:40:37.792 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.793 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.794 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.795 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.796 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.796 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.797 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:37.797 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:37.798 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:37.798 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:37.799 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:37.799 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:40:37.802 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:37.802 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:37.803 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:37.804 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:37.805 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:37.806 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:40:37.806 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:37.807 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:37.809 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:37.811 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:37.813 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:37.815 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:40:37.815 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 15.2132ms
2025-07-28 22:40:37.816 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 14.9938ms
2025-07-28 22:40:37.816 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 14.7529ms
2025-07-28 22:40:37.817 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 14.3187ms
2025-07-28 22:40:37.817 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 14.1163ms
2025-07-28 22:40:37.818 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.8812ms
2025-07-28 22:40:37.819 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.819 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.820 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.820 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.821 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.821 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:40:37.822 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/68 - 200 null application/json; charset=utf-8 43.9913ms
2025-07-28 22:40:37.822 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/71 - 200 null application/json; charset=utf-8 45.7713ms
2025-07-28 22:40:37.823 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/64 - 200 null application/json; charset=utf-8 43.7092ms
2025-07-28 22:40:37.823 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/67 - 200 null application/json; charset=utf-8 42.5987ms
2025-07-28 22:40:37.824 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/63 - 200 null application/json; charset=utf-8 41.7215ms
2025-07-28 22:40:37.824 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/62 - 200 null application/json; charset=utf-8 41.0458ms
2025-07-28 22:42:44.666 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:42:44.668 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.668 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 1.7103ms
2025-07-28 22:42:44.670 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:42:44.670 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.672 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:42:44.673 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:42:44.673 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:42:44.677 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:42:44.679 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:42:44.680 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 5.3695ms
2025-07-28 22:42:44.680 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:42:44.681 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 11.5227ms
2025-07-28 22:42:44.683 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - null null
2025-07-28 22:42:44.685 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - null null
2025-07-28 22:42:44.684 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - null null
2025-07-28 22:42:44.684 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - null null
2025-07-28 22:42:44.685 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.685 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - null null
2025-07-28 22:42:44.685 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - null null
2025-07-28 22:42:44.686 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.687 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.688 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.688 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - 204 null null 4.8712ms
2025-07-28 22:42:44.689 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.690 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.691 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - 204 null null 5.9554ms
2025-07-28 22:42:44.691 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - 204 null null 6.8633ms
2025-07-28 22:42:44.691 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - 204 null null 7.2441ms
2025-07-28 22:42:44.693 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - null null
2025-07-28 22:42:44.693 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - 204 null null 8.1812ms
2025-07-28 22:42:44.693 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - 204 null null 8.2614ms
2025-07-28 22:42:44.694 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - null null
2025-07-28 22:42:44.696 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - null null
2025-07-28 22:42:44.697 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - null null
2025-07-28 22:42:44.698 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.699 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - null null
2025-07-28 22:42:44.701 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - null null
2025-07-28 22:42:44.702 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.703 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.703 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.704 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - 204 null null 11.1933ms
2025-07-28 22:42:44.705 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.706 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.706 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - 204 null null 11.5581ms
2025-07-28 22:42:44.706 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - 204 null null 10.7806ms
2025-07-28 22:42:44.707 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - 204 null null 9.822ms
2025-07-28 22:42:44.712 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/66 - application/json null
2025-07-28 22:42:44.708 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - 204 null null 9.0886ms
2025-07-28 22:42:44.709 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - 204 null null 8.171ms
2025-07-28 22:42:44.710 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/72 - application/json null
2025-07-28 22:42:44.711 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/70 - application/json null
2025-07-28 22:42:44.708 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/73 - application/json null
2025-07-28 22:42:44.714 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.715 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/65 - application/json null
2025-07-28 22:42:44.716 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/69 - application/json null
2025-07-28 22:42:44.717 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.718 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.719 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.720 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:42:44.720 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.721 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.722 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:42:44.722 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:42:44.722 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:42:44.723 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.724 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:42:44.724 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:42:44.724 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.725 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.726 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.726 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:42:44.727 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.728 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.728 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:42:44.729 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:42:44.729 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:42:44.731 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:42:44.731 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:42:44.732 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:42:44.733 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:42:44.734 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:42:44.735 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:42:44.736 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:42:44.736 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:42:44.737 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:42:44.738 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:42:44.739 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:42:44.741 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:42:44.742 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:42:44.744 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:42:44.744 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.8563ms
2025-07-28 22:42:44.744 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.728ms
2025-07-28 22:42:44.745 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.5911ms
2025-07-28 22:42:44.746 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.2272ms
2025-07-28 22:42:44.746 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.0918ms
2025-07-28 22:42:44.747 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 11.9051ms
2025-07-28 22:42:44.748 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.748 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.749 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.749 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.750 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.750 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.751 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/66 - 200 null application/json; charset=utf-8 38.2928ms
2025-07-28 22:42:44.751 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/72 - 200 null application/json; charset=utf-8 41.1589ms
2025-07-28 22:42:44.752 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/70 - 200 null application/json; charset=utf-8 40.4677ms
2025-07-28 22:42:44.752 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/73 - 200 null application/json; charset=utf-8 44.0974ms
2025-07-28 22:42:44.753 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/65 - 200 null application/json; charset=utf-8 37.867ms
2025-07-28 22:42:44.753 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/69 - 200 null application/json; charset=utf-8 37.2499ms
2025-07-28 22:42:44.754 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/71 - application/json null
2025-07-28 22:42:44.755 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/68 - application/json null
2025-07-28 22:42:44.757 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/64 - application/json null
2025-07-28 22:42:44.758 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/67 - application/json null
2025-07-28 22:42:44.759 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/63 - application/json null
2025-07-28 22:42:44.760 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/62 - application/json null
2025-07-28 22:42:44.760 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.761 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.762 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.763 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.764 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.765 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:42:44.767 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:42:44.767 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:42:44.767 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:42:44.767 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:42:44.768 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:42:44.768 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:42:44.768 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.769 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.770 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.771 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.772 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.773 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.773 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:42:44.773 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:42:44.774 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:42:44.774 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:42:44.774 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:42:44.775 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:42:44.777 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:42:44.778 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:42:44.778 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:42:44.779 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:42:44.780 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:42:44.781 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:42:44.782 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:42:44.783 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:42:44.785 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:42:44.786 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:42:44.787 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:42:44.789 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:42:44.789 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.4822ms
2025-07-28 22:42:44.790 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.2612ms
2025-07-28 22:42:44.790 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.1164ms
2025-07-28 22:42:44.791 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.0175ms
2025-07-28 22:42:44.791 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.8889ms
2025-07-28 22:42:44.792 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.595ms
2025-07-28 22:42:44.793 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.793 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.794 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.794 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.795 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.795 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:42:44.796 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/71 - 200 null application/json; charset=utf-8 41.2738ms
2025-07-28 22:42:44.796 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/68 - 200 null application/json; charset=utf-8 40.8325ms
2025-07-28 22:42:44.797 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/64 - 200 null application/json; charset=utf-8 40.2033ms
2025-07-28 22:42:44.797 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/67 - 200 null application/json; charset=utf-8 39.6543ms
2025-07-28 22:42:44.798 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/63 - 200 null application/json; charset=utf-8 39.2158ms
2025-07-28 22:42:44.798 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/62 - 200 null application/json; charset=utf-8 38.6922ms
2025-07-28 22:51:25.290 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:51:25.292 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.292 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 1.5092ms
2025-07-28 22:51:25.293 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:51:25.294 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.339 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:25.340 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:51:25.341 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:25.347 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:51:25.349 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:51:25.349 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 8.147ms
2025-07-28 22:51:25.350 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:51:25.351 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 57.2549ms
2025-07-28 22:51:25.352 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - null null
2025-07-28 22:51:25.353 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.353 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - null null
2025-07-28 22:51:25.353 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - null null
2025-07-28 22:51:25.354 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - 204 null null 1.8246ms
2025-07-28 22:51:25.354 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - null null
2025-07-28 22:51:25.354 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - null null
2025-07-28 22:51:25.354 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - null null
2025-07-28 22:51:25.355 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.356 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.357 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - null null
2025-07-28 22:51:25.358 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.359 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.360 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.361 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - 204 null null 7.4077ms
2025-07-28 22:51:25.361 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - 204 null null 7.7454ms
2025-07-28 22:51:25.362 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.363 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - 204 null null 8.6228ms
2025-07-28 22:51:25.363 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - 204 null null 8.7938ms
2025-07-28 22:51:25.363 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - 204 null null 9.0051ms
2025-07-28 22:51:25.365 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - null null
2025-07-28 22:51:25.366 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - null null
2025-07-28 22:51:25.366 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - 204 null null 8.7219ms
2025-07-28 22:51:25.367 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - null null
2025-07-28 22:51:25.368 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - null null
2025-07-28 22:51:25.370 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - null null
2025-07-28 22:51:25.371 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.372 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.373 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/73 - application/json null
2025-07-28 22:51:25.374 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.375 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.376 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.376 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - 204 null null 11.6238ms
2025-07-28 22:51:25.377 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - 204 null null 10.851ms
2025-07-28 22:51:25.378 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.378 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - 204 null null 10.8135ms
2025-07-28 22:51:25.379 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - 204 null null 10.044ms
2025-07-28 22:51:25.379 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - 204 null null 9.2858ms
2025-07-28 22:51:25.380 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/70 - application/json null
2025-07-28 22:51:25.382 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/66 - application/json null
2025-07-28 22:51:25.383 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:25.383 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/72 - application/json null
2025-07-28 22:51:25.385 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/69 - application/json null
2025-07-28 22:51:25.386 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/65 - application/json null
2025-07-28 22:51:25.387 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.387 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.388 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.389 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.391 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.392 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.393 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:25.393 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:25.395 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.397 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:25.398 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:25.400 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:25.400 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 4.2472ms
2025-07-28 22:51:25.401 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.401 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/73 - 200 null application/json; charset=utf-8 28.5784ms
2025-07-28 22:51:25.403 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/71 - application/json null
2025-07-28 22:51:25.404 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.406 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:25.407 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.408 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:25.411 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:25.414 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:25.414 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 5.1172ms
2025-07-28 22:51:25.415 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.416 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/71 - 200 null application/json; charset=utf-8 13.1337ms
2025-07-28 22:51:25.418 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/68 - application/json null
2025-07-28 22:51:25.420 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.421 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:25.422 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.423 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:25.426 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:25.429 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:25.429 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 5.1447ms
2025-07-28 22:51:25.430 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.431 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/68 - 200 null application/json; charset=utf-8 12.6763ms
2025-07-28 22:51:25.432 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/64 - application/json null
2025-07-28 22:51:25.434 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.435 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:25.436 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.437 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:25.439 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:25.442 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:25.443 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 5.1982ms
2025-07-28 22:51:25.443 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.444 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/64 - 200 null application/json; charset=utf-8 11.6865ms
2025-07-28 22:51:25.445 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:25.446 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/67 - application/json null
2025-07-28 22:51:25.447 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.448 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.449 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:25.449 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:25.450 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:25.451 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.452 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.452 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:25.454 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:25.453 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:25.455 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.455 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:25.456 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:25.457 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:25.458 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:25.458 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:25.461 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:25.461 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 10.9962ms
2025-07-28 22:51:25.463 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:25.463 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 7.7313ms
2025-07-28 22:51:25.464 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:25.464 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:25.464 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.464 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 10.7061ms
2025-07-28 22:51:25.465 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.467 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:25.468 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:25.468 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/66 - 200 null application/json; charset=utf-8 86.5379ms
2025-07-28 22:51:25.469 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.469 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/67 - 200 null application/json; charset=utf-8 23.3014ms
2025-07-28 22:51:25.470 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 11.0226ms
2025-07-28 22:51:25.470 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 73.1633ms
2025-07-28 22:51:25.472 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/63 - application/json null
2025-07-28 22:51:25.472 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/72 - 200 null application/json; charset=utf-8 88.7501ms
2025-07-28 22:51:25.474 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/62 - application/json null
2025-07-28 22:51:25.474 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.475 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.476 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.478 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:25.478 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/69 - 200 null application/json; charset=utf-8 93.879ms
2025-07-28 22:51:25.479 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/70 - 200 null application/json; charset=utf-8 98.6585ms
2025-07-28 22:51:25.480 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:25.480 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:25.483 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.484 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.484 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:25.484 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:25.487 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:25.487 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:25.488 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:25.490 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:25.490 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 5.2797ms
2025-07-28 22:51:25.491 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 5.0687ms
2025-07-28 22:51:25.492 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.492 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.493 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/62 - 200 null application/json; charset=utf-8 19.0252ms
2025-07-28 22:51:25.493 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/63 - 200 null application/json; charset=utf-8 21.3774ms
2025-07-28 22:51:25.559 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:25.560 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.560 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:25.563 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:25.565 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:25.565 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 4.1062ms
2025-07-28 22:51:25.566 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:25.566 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/65 - 200 null application/json; charset=utf-8 180.5752ms
2025-07-28 22:51:30.786 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 22:51:30.788 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:30.788 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 1.8968ms
2025-07-28 22:51:30.790 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:51:30.791 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:30.793 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:30.794 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:51:30.795 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:51:30.797 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 22:51:30.798 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 22:51:30.800 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 22:51:30.802 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 22:51:30.805 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 22:51:30.809 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 22:51:30.811 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 22:51:30.813 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 22:51:30.815 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 22:51:30.817 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 22:51:30.818 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`6[[<>f__AnonymousType7`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:51:30.819 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 23.1605ms
2025-07-28 22:51:30.819 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:51:30.820 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 29.7613ms
2025-07-28 22:51:33.242 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - null null
2025-07-28 22:51:33.244 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:33.244 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - 204 null null 1.7597ms
2025-07-28 22:51:33.246 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/login - application/json 51
2025-07-28 22:51:33.247 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:33.249 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:33.250 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 22:51:33.250 +08:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(CeceLearningPortal.Api.DTOs.LoginDto) on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 22:51:33.252 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-07-28 22:51:33.300 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?', @p2='?', @p0='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = DateTime), @p8='?', @p9='?', @p10='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "LastLoginAt" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2;
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "RevokedAt", "RevokedByIp", "Token", "UserId")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
2025-07-28 22:51:33.301 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.AuthResponseDto'.
2025-07-28 22:51:33.302 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api) in 50.6246ms
2025-07-28 22:51:33.303 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 22:51:33.303 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/login - 200 null application/json; charset=utf-8 57.4562ms
2025-07-28 22:51:33.325 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:51:33.325 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:51:33.326 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:33.327 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:33.327 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 2.9159ms
2025-07-28 22:51:33.329 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:33.330 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:51:33.331 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:51:33.332 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:33.333 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:51:33.334 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:33.335 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 22:51:33.335 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:51:33.336 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 22:51:33.337 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:33.338 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 22:51:33.340 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 22:51:33.341 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:51:33.343 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 22:51:33.344 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:51:33.346 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 7.481ms
2025-07-28 22:51:33.347 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:51:33.347 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 17.3525ms
2025-07-28 22:51:33.347 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 22:51:33.351 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 22:51:33.352 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 22:51:33.354 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 22:51:33.356 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 22:51:33.357 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`6[[<>f__AnonymousType7`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:51:33.359 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 24.8958ms
2025-07-28 22:51:33.359 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:51:33.360 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 34.5665ms
2025-07-28 22:51:35.271 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:51:35.272 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:35.274 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:35.275 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:51:35.276 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:51:35.277 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 22:51:35.278 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 22:51:35.279 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 22:51:35.280 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 22:51:35.283 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 22:51:35.285 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 22:51:35.287 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 22:51:35.288 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 22:51:35.290 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 22:51:35.291 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 22:51:35.292 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`6[[<>f__AnonymousType7`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:51:35.293 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 16.5256ms
2025-07-28 22:51:35.294 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:51:35.294 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 22.7835ms
2025-07-28 22:51:44.554 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:51:44.556 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.556 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 1.65ms
2025-07-28 22:51:44.558 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:51:44.559 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.560 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:44.561 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:51:44.561 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:44.565 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:51:44.567 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:51:44.568 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 5.9115ms
2025-07-28 22:51:44.569 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:51:44.569 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 11.8136ms
2025-07-28 22:51:44.571 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - null null
2025-07-28 22:51:44.572 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - null null
2025-07-28 22:51:44.573 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.573 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - null null
2025-07-28 22:51:44.573 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - null null
2025-07-28 22:51:44.573 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - null null
2025-07-28 22:51:44.573 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - null null
2025-07-28 22:51:44.574 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.574 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - 204 null null 3.2962ms
2025-07-28 22:51:44.576 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.577 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.578 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.579 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.579 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - 204 null null 7.4242ms
2025-07-28 22:51:44.580 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - null null
2025-07-28 22:51:44.581 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - 204 null null 7.8189ms
2025-07-28 22:51:44.581 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - 204 null null 7.856ms
2025-07-28 22:51:44.582 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - 204 null null 8.251ms
2025-07-28 22:51:44.582 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - 204 null null 8.5201ms
2025-07-28 22:51:44.584 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - null null
2025-07-28 22:51:44.584 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.586 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - null null
2025-07-28 22:51:44.587 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - null null
2025-07-28 22:51:44.588 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - null null
2025-07-28 22:51:44.589 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - null null
2025-07-28 22:51:44.590 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.591 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - 204 null null 10.0529ms
2025-07-28 22:51:44.592 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.593 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.594 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.595 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.595 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - 204 null null 11.6093ms
2025-07-28 22:51:44.596 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/73 - application/json null
2025-07-28 22:51:44.597 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - 204 null null 11.0537ms
2025-07-28 22:51:44.597 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - 204 null null 10.3311ms
2025-07-28 22:51:44.597 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - 204 null null 9.5669ms
2025-07-28 22:51:44.598 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - 204 null null 8.8648ms
2025-07-28 22:51:44.599 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/70 - application/json null
2025-07-28 22:51:44.600 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.601 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/66 - application/json null
2025-07-28 22:51:44.602 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/72 - application/json null
2025-07-28 22:51:44.603 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/69 - application/json null
2025-07-28 22:51:44.605 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/65 - application/json null
2025-07-28 22:51:44.606 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.607 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:44.607 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.608 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.609 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.610 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.611 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:44.611 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.612 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:44.613 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:44.613 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:44.613 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:44.614 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.614 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:44.615 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.616 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.617 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.617 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.618 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:44.619 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:44.620 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:44.620 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:44.621 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:44.622 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:44.623 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:44.624 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:44.625 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:44.626 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:44.626 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:44.627 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:44.628 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:44.630 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:44.631 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:44.633 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:44.634 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:44.635 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 15.9775ms
2025-07-28 22:51:44.635 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.8733ms
2025-07-28 22:51:44.636 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.674ms
2025-07-28 22:51:44.639 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.637 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.8866ms
2025-07-28 22:51:44.638 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.5779ms
2025-07-28 22:51:44.638 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.639 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.636 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.2852ms
2025-07-28 22:51:44.640 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/66 - 200 null application/json; charset=utf-8 38.6676ms
2025-07-28 22:51:44.641 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.645 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/69 - 200 null application/json; charset=utf-8 41.2391ms
2025-07-28 22:51:44.642 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/73 - 200 null application/json; charset=utf-8 45.3827ms
2025-07-28 22:51:44.642 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/70 - 200 null application/json; charset=utf-8 43.1579ms
2025-07-28 22:51:44.643 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.644 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/71 - application/json null
2025-07-28 22:51:44.641 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.646 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/67 - application/json null
2025-07-28 22:51:44.647 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/68 - application/json null
2025-07-28 22:51:44.648 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/64 - application/json null
2025-07-28 22:51:44.649 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/72 - 200 null application/json; charset=utf-8 46.4806ms
2025-07-28 22:51:44.650 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.651 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/65 - 200 null application/json; charset=utf-8 46.0031ms
2025-07-28 22:51:44.652 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.652 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.653 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.655 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/63 - application/json null
2025-07-28 22:51:44.656 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:44.656 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/62 - application/json null
2025-07-28 22:51:44.657 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:44.658 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:44.658 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:44.659 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.660 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.661 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:51:44.662 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.662 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.663 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.664 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:44.664 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:44.665 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:51:44.665 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:44.665 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:44.666 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:44.667 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.668 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:44.668 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.670 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:44.671 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:44.671 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:44.677 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:44.672 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:44.673 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:44.673 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:51:44.675 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:44.678 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:44.679 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:44.681 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:44.681 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 14.6815ms
2025-07-28 22:51:44.683 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.533ms
2025-07-28 22:51:44.683 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.3201ms
2025-07-28 22:51:44.683 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:51:44.684 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 7.8736ms
2025-07-28 22:51:44.684 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.729ms
2025-07-28 22:51:44.685 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.685 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.686 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.688 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:51:44.688 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.688 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.689 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/71 - 200 null application/json; charset=utf-8 44.6741ms
2025-07-28 22:51:44.690 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/67 - 200 null application/json; charset=utf-8 43.5627ms
2025-07-28 22:51:44.690 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/68 - 200 null application/json; charset=utf-8 42.9894ms
2025-07-28 22:51:44.691 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 8.952ms
2025-07-28 22:51:44.692 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/63 - 200 null application/json; charset=utf-8 37.0087ms
2025-07-28 22:51:44.692 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/64 - 200 null application/json; charset=utf-8 43.8515ms
2025-07-28 22:51:44.696 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:51:44.699 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/62 - 200 null application/json; charset=utf-8 43.0069ms
2025-07-28 22:52:11.977 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:52:11.978 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:11.979 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 1.4438ms
2025-07-28 22:52:11.980 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:52:11.981 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:11.982 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:52:11.983 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:52:11.984 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:52:11.987 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:52:11.989 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:52:11.990 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 5.3999ms
2025-07-28 22:52:11.991 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:52:11.991 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 11.4036ms
2025-07-28 22:52:11.995 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - null null
2025-07-28 22:52:11.996 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - null null
2025-07-28 22:52:11.996 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - null null
2025-07-28 22:52:11.996 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - null null
2025-07-28 22:52:11.996 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:11.996 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - null null
2025-07-28 22:52:11.996 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - null null
2025-07-28 22:52:11.997 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:11.998 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:11.999 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:11.999 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - 204 null null 4.567ms
2025-07-28 22:52:12.000 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.001 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.001 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - 204 null null 5.8272ms
2025-07-28 22:52:12.002 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - 204 null null 5.9886ms
2025-07-28 22:52:12.002 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - 204 null null 6.1795ms
2025-07-28 22:52:12.003 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - null null
2025-07-28 22:52:12.004 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - 204 null null 7.5858ms
2025-07-28 22:52:12.004 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - 204 null null 7.9394ms
2025-07-28 22:52:12.005 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - null null
2025-07-28 22:52:12.006 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - null null
2025-07-28 22:52:12.008 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - null null
2025-07-28 22:52:12.009 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.010 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - null null
2025-07-28 22:52:12.011 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - null null
2025-07-28 22:52:12.012 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.013 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.014 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.014 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - 204 null null 10.6672ms
2025-07-28 22:52:12.015 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.016 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.016 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - 204 null null 11.0298ms
2025-07-28 22:52:12.017 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - 204 null null 10.2256ms
2025-07-28 22:52:12.017 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - 204 null null 9.2461ms
2025-07-28 22:52:12.018 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/73 - application/json null
2025-07-28 22:52:12.019 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - 204 null null 8.7257ms
2025-07-28 22:52:12.019 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - 204 null null 7.995ms
2025-07-28 22:52:12.020 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/70 - application/json null
2025-07-28 22:52:12.021 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/72 - application/json null
2025-07-28 22:52:12.023 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/66 - application/json null
2025-07-28 22:52:12.024 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.025 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/69 - application/json null
2025-07-28 22:52:12.027 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/65 - application/json null
2025-07-28 22:52:12.028 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.029 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.030 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.031 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:52:12.031 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.032 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.033 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:52:12.033 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:52:12.033 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:52:12.034 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.035 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:52:12.035 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:52:12.035 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.036 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.037 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.037 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:52:12.038 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.039 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.040 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:52:12.040 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:52:12.041 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:52:12.042 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:52:12.042 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:52:12.043 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:52:12.045 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:52:12.045 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:52:12.046 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:52:12.047 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:52:12.047 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:52:12.048 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:52:12.049 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:52:12.051 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:52:12.052 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:52:12.054 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:52:12.055 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:52:12.056 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 14.4375ms
2025-07-28 22:52:12.056 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.1953ms
2025-07-28 22:52:12.057 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.2244ms
2025-07-28 22:52:12.058 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.2314ms
2025-07-28 22:52:12.059 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.0639ms
2025-07-28 22:52:12.059 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.1023ms
2025-07-28 22:52:12.060 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.060 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.061 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.061 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.062 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.063 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.063 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/73 - 200 null application/json; charset=utf-8 44.6561ms
2025-07-28 22:52:12.064 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/70 - 200 null application/json; charset=utf-8 43.2424ms
2025-07-28 22:52:12.064 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/72 - 200 null application/json; charset=utf-8 42.6439ms
2025-07-28 22:52:12.065 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/66 - 200 null application/json; charset=utf-8 41.8262ms
2025-07-28 22:52:12.065 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/69 - 200 null application/json; charset=utf-8 39.8017ms
2025-07-28 22:52:12.066 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/65 - 200 null application/json; charset=utf-8 38.7417ms
2025-07-28 22:52:12.067 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/71 - application/json null
2025-07-28 22:52:12.068 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/68 - application/json null
2025-07-28 22:52:12.069 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/64 - application/json null
2025-07-28 22:52:12.070 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/67 - application/json null
2025-07-28 22:52:12.071 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/63 - application/json null
2025-07-28 22:52:12.072 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/62 - application/json null
2025-07-28 22:52:12.074 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.074 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.075 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.076 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.077 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.078 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:52:12.080 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:52:12.080 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:52:12.080 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:52:12.080 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:52:12.081 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:52:12.081 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:52:12.081 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.082 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.083 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.084 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.085 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.086 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.086 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:52:12.087 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:52:12.087 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:52:12.088 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:52:12.088 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:52:12.088 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:52:12.091 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:52:12.092 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:52:12.093 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:52:12.094 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:52:12.094 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:52:12.095 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:52:12.096 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:52:12.097 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:52:12.098 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:52:12.100 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:52:12.101 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:52:12.103 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:52:12.103 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.802ms
2025-07-28 22:52:12.103 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.3118ms
2025-07-28 22:52:12.104 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.9067ms
2025-07-28 22:52:12.105 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.6119ms
2025-07-28 22:52:12.105 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.4295ms
2025-07-28 22:52:12.106 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.1302ms
2025-07-28 22:52:12.107 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.107 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.108 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.108 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.109 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.109 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:52:12.110 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/68 - 200 null application/json; charset=utf-8 41.9542ms
2025-07-28 22:52:12.110 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/71 - 200 null application/json; charset=utf-8 43.6769ms
2025-07-28 22:52:12.111 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/64 - 200 null application/json; charset=utf-8 41.8108ms
2025-07-28 22:52:12.111 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/67 - 200 null application/json; charset=utf-8 41.2199ms
2025-07-28 22:52:12.112 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/63 - 200 null application/json; charset=utf-8 40.6558ms
2025-07-28 22:52:12.112 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/62 - 200 null application/json; charset=utf-8 40.0253ms
2025-07-28 22:53:01.776 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:53:01.777 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.777 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 1.6095ms
2025-07-28 22:53:01.779 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:53:01.780 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.781 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:53:01.782 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:53:01.783 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:53:01.786 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:53:01.788 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:53:01.789 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 5.0896ms
2025-07-28 22:53:01.789 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:53:01.790 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 11.0585ms
2025-07-28 22:53:01.795 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - null null
2025-07-28 22:53:01.796 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - null null
2025-07-28 22:53:01.796 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - null null
2025-07-28 22:53:01.797 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - null null
2025-07-28 22:53:01.797 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - null null
2025-07-28 22:53:01.797 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - null null
2025-07-28 22:53:01.797 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.798 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.799 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.801 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.801 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.802 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.803 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - 204 null null 8.0351ms
2025-07-28 22:53:01.803 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - 204 null null 7.276ms
2025-07-28 22:53:01.804 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - 204 null null 7.235ms
2025-07-28 22:53:01.804 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - 204 null null 7.4035ms
2025-07-28 22:53:01.804 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - 204 null null 7.5303ms
2025-07-28 22:53:01.805 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - 204 null null 7.8865ms
2025-07-28 22:53:01.806 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - null null
2025-07-28 22:53:01.807 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - null null
2025-07-28 22:53:01.809 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - null null
2025-07-28 22:53:01.810 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - null null
2025-07-28 22:53:01.811 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - null null
2025-07-28 22:53:01.812 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - null null
2025-07-28 22:53:01.813 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.814 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.815 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.816 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.817 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.818 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.818 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - 204 null null 12.4542ms
2025-07-28 22:53:01.819 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - 204 null null 11.6846ms
2025-07-28 22:53:01.819 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - 204 null null 10.5916ms
2025-07-28 22:53:01.820 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - 204 null null 9.6711ms
2025-07-28 22:53:01.820 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - 204 null null 8.8703ms
2025-07-28 22:53:01.820 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - 204 null null 8.1196ms
2025-07-28 22:53:01.822 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/73 - application/json null
2025-07-28 22:53:01.823 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/70 - application/json null
2025-07-28 22:53:01.824 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/72 - application/json null
2025-07-28 22:53:01.826 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/66 - application/json null
2025-07-28 22:53:01.827 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/69 - application/json null
2025-07-28 22:53:01.828 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/65 - application/json null
2025-07-28 22:53:01.829 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.830 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.831 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.832 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.833 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.834 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.836 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:53:01.835 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:53:01.836 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:53:01.835 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:53:01.836 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:53:01.841 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.837 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.838 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.839 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.840 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.837 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:53:01.841 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:53:01.842 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:53:01.842 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:53:01.843 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:53:01.843 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:53:01.844 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.846 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:53:01.847 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:53:01.848 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:53:01.849 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:53:01.849 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:53:01.850 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:53:01.850 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:53:01.852 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:53:01.853 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:53:01.855 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:53:01.855 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:53:01.857 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:53:01.857 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.6859ms
2025-07-28 22:53:01.858 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.7511ms
2025-07-28 22:53:01.859 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.4334ms
2025-07-28 22:53:01.861 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:53:01.861 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 14.0052ms
2025-07-28 22:53:01.862 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.8028ms
2025-07-28 22:53:01.863 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.863 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.864 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.864 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 10.5246ms
2025-07-28 22:53:01.865 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.865 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.866 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/69 - 200 null application/json; charset=utf-8 38.8633ms
2025-07-28 22:53:01.866 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/66 - 200 null application/json; charset=utf-8 40.7823ms
2025-07-28 22:53:01.867 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/70 - 200 null application/json; charset=utf-8 44.0537ms
2025-07-28 22:53:01.868 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.868 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/72 - 200 null application/json; charset=utf-8 43.9271ms
2025-07-28 22:53:01.868 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/73 - 200 null application/json; charset=utf-8 46.7681ms
2025-07-28 22:53:01.870 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/71 - application/json null
2025-07-28 22:53:01.871 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/68 - application/json null
2025-07-28 22:53:01.872 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/64 - application/json null
2025-07-28 22:53:01.873 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/65 - 200 null application/json; charset=utf-8 44.3691ms
2025-07-28 22:53:01.874 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/67 - application/json null
2025-07-28 22:53:01.876 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/63 - application/json null
2025-07-28 22:53:01.877 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.878 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.879 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.880 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/62 - application/json null
2025-07-28 22:53:01.881 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.882 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.883 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:53:01.883 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:53:01.884 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:53:01.884 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:53:01.885 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:53:01.885 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:53:01.886 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.887 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.888 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.889 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:53:01.889 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.890 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.890 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:53:01.891 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:53:01.891 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:53:01.892 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.893 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:53:01.893 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:53:01.896 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:53:01.896 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:53:01.896 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:53:01.897 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:53:01.898 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:53:01.899 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:53:01.900 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:53:01.901 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:53:01.902 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:53:01.903 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:53:01.905 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:53:01.906 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:53:01.906 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 12.5524ms
2025-07-28 22:53:01.908 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:53:01.909 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 14.0065ms
2025-07-28 22:53:01.909 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.8254ms
2025-07-28 22:53:01.910 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.2014ms
2025-07-28 22:53:01.911 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.0038ms
2025-07-28 22:53:01.911 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.912 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 11.8009ms
2025-07-28 22:53:01.912 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.913 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.914 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.914 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.915 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/68 - 200 null application/json; charset=utf-8 43.7695ms
2025-07-28 22:53:01.915 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:53:01.916 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/71 - 200 null application/json; charset=utf-8 46.1007ms
2025-07-28 22:53:01.916 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/64 - 200 null application/json; charset=utf-8 44.0745ms
2025-07-28 22:53:01.917 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/67 - 200 null application/json; charset=utf-8 42.5393ms
2025-07-28 22:53:01.917 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/63 - 200 null application/json; charset=utf-8 41.7017ms
2025-07-28 22:53:01.919 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/62 - 200 null application/json; charset=utf-8 38.6899ms
2025-07-28 22:56:52.373 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 22:56:52.375 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:56:52.376 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 2.5699ms
2025-07-28 22:56:52.378 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:56:52.379 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:56:52.423 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:56:52.424 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:56:52.424 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:56:52.426 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 22:56:52.428 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 22:56:52.429 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 22:56:52.431 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 22:56:52.434 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 22:56:52.436 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 22:56:52.438 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 22:56:52.439 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 22:56:52.441 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 22:56:52.442 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 22:56:52.443 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`6[[<>f__AnonymousType7`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:56:52.443 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 18.6337ms
2025-07-28 22:56:52.444 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:56:52.445 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 66.5888ms
2025-07-28 22:56:55.205 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - null null
2025-07-28 22:56:55.207 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:56:55.207 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - 204 null null 1.592ms
2025-07-28 22:56:55.209 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/login - application/json 51
2025-07-28 22:56:55.210 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:56:55.211 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:56:55.212 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 22:56:55.213 +08:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(CeceLearningPortal.Api.DTOs.LoginDto) on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 22:56:55.215 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-07-28 22:56:55.262 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?', @p2='?', @p0='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = DateTime), @p8='?', @p9='?', @p10='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "LastLoginAt" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2;
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "RevokedAt", "RevokedByIp", "Token", "UserId")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
2025-07-28 22:56:55.264 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.AuthResponseDto'.
2025-07-28 22:56:55.264 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api) in 50.3512ms
2025-07-28 22:56:55.265 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 22:56:55.265 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/login - 200 null application/json; charset=utf-8 56.3303ms
2025-07-28 22:56:55.287 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 22:56:55.288 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:56:55.288 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:56:55.289 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:56:55.290 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 3.1211ms
2025-07-28 22:56:55.291 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:56:55.292 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:56:55.293 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:56:55.294 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:56:55.295 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:56:55.296 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:56:55.297 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:56:55.298 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:56:55.302 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:56:55.309 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:56:55.310 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 10.5567ms
2025-07-28 22:56:55.311 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:56:55.311 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 19.2336ms
2025-07-28 22:56:55.341 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 22:56:55.343 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 22:56:55.345 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 22:56:55.346 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 22:56:55.350 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 22:56:55.352 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 22:56:55.354 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 22:56:55.355 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 22:56:55.357 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 22:56:55.358 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 22:56:55.359 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`6[[<>f__AnonymousType7`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:56:55.360 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 63.2804ms
2025-07-28 22:56:55.360 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:56:55.361 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 73.0589ms
2025-07-28 22:56:57.267 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 22:56:57.268 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:56:57.271 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:56:57.272 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:56:57.272 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 22:56:57.273 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 22:56:57.274 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 22:56:57.276 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 22:56:57.277 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 22:56:57.279 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 22:56:57.282 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 22:56:57.283 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 22:56:57.285 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 22:56:57.286 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 22:56:57.287 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 22:56:57.288 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType6`6[[<>f__AnonymousType7`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 22:56:57.289 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 15.8653ms
2025-07-28 22:56:57.289 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 22:56:57.290 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 22.8765ms
2025-07-28 22:57:00.238 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 22:57:00.239 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.241 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:57:00.242 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:57:00.242 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:57:00.246 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 22:57:00.248 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 22:57:00.249 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 6.2791ms
2025-07-28 22:57:00.250 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 22:57:00.250 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 12.317ms
2025-07-28 22:57:00.252 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - null null
2025-07-28 22:57:00.252 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - null null
2025-07-28 22:57:00.254 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - null null
2025-07-28 22:57:00.253 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.253 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - null null
2025-07-28 22:57:00.254 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - null null
2025-07-28 22:57:00.254 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - null null
2025-07-28 22:57:00.254 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.255 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.256 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - 204 null null 3.8489ms
2025-07-28 22:57:00.257 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.257 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.258 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.259 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - 204 null null 6.3064ms
2025-07-28 22:57:00.259 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - 204 null null 4.8493ms
2025-07-28 22:57:00.260 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - null null
2025-07-28 22:57:00.261 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - 204 null null 7.1003ms
2025-07-28 22:57:00.261 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - 204 null null 6.8732ms
2025-07-28 22:57:00.261 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - 204 null null 7.1022ms
2025-07-28 22:57:00.263 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - null null
2025-07-28 22:57:00.264 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - null null
2025-07-28 22:57:00.265 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.266 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - null null
2025-07-28 22:57:00.267 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - null null
2025-07-28 22:57:00.269 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - null null
2025-07-28 22:57:00.270 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.270 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.271 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - 204 null null 10.7365ms
2025-07-28 22:57:00.272 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.273 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.274 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.274 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - 204 null null 11.6021ms
2025-07-28 22:57:00.275 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - 204 null null 10.7257ms
2025-07-28 22:57:00.276 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/73 - application/json null
2025-07-28 22:57:00.276 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - 204 null null 10.1229ms
2025-07-28 22:57:00.276 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - 204 null null 9.0511ms
2025-07-28 22:57:00.277 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - 204 null null 8.2077ms
2025-07-28 22:57:00.278 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/70 - application/json null
2025-07-28 22:57:00.279 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/65 - application/json null
2025-07-28 22:57:00.280 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.282 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/66 - application/json null
2025-07-28 22:57:00.283 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/72 - application/json null
2025-07-28 22:57:00.284 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/69 - application/json null
2025-07-28 22:57:00.285 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.286 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.287 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:57:00.287 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.288 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.289 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.290 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:57:00.291 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.291 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:57:00.293 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.293 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:57:00.294 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.294 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:57:00.296 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:57:00.297 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:57:00.298 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:57:00.300 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:57:00.302 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:57:00.302 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 7.0937ms
2025-07-28 22:57:00.303 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 6.1998ms
2025-07-28 22:57:00.304 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.305 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.305 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/73 - 200 null application/json; charset=utf-8 29.5598ms
2025-07-28 22:57:00.306 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/70 - 200 null application/json; charset=utf-8 27.9779ms
2025-07-28 22:57:00.308 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/71 - application/json null
2025-07-28 22:57:00.310 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/68 - application/json null
2025-07-28 22:57:00.311 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.313 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.315 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:57:00.315 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:57:00.316 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.317 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.318 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:57:00.319 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:57:00.322 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:57:00.323 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:57:00.324 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:57:00.325 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:57:00.326 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 5.6731ms
2025-07-28 22:57:00.326 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 5.2194ms
2025-07-28 22:57:00.327 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.328 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.328 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/71 - 200 null application/json; charset=utf-8 20.3277ms
2025-07-28 22:57:00.329 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/68 - 200 null application/json; charset=utf-8 19.1649ms
2025-07-28 22:57:00.331 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/64 - application/json null
2025-07-28 22:57:00.332 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/67 - application/json null
2025-07-28 22:57:00.334 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.335 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.336 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:57:00.337 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:57:00.337 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.339 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.339 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:57:00.340 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:57:00.342 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:57:00.342 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:57:00.343 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:57:00.344 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:57:00.345 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.345 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:57:00.347 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:57:00.347 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 6.774ms
2025-07-28 22:57:00.350 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.348 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:57:00.349 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.350 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 7.7678ms
2025-07-28 22:57:00.348 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:57:00.351 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/64 - 200 null application/json; charset=utf-8 19.9641ms
2025-07-28 22:57:00.352 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.352 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:57:00.353 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.354 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:57:00.355 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/63 - application/json null
2025-07-28 22:57:00.355 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:57:00.355 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:57:00.356 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/67 - 200 null application/json; charset=utf-8 23.771ms
2025-07-28 22:57:00.358 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:57:00.359 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.360 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:57:00.361 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:57:00.361 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:57:00.362 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/62 - application/json null
2025-07-28 22:57:00.363 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 65.0271ms
2025-07-28 22:57:00.364 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:57:00.365 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:57:00.366 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:57:00.367 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.3927ms
2025-07-28 22:57:00.368 +08:00 [INF] CORS policy execution successful.
2025-07-28 22:57:00.368 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.369 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.370 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 13.9829ms
2025-07-28 22:57:00.370 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 10.9137ms
2025-07-28 22:57:00.371 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.372 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/66 - 200 null application/json; charset=utf-8 90.1763ms
2025-07-28 22:57:00.372 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 22:57:00.372 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:57:00.373 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.373 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.374 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/65 - 200 null application/json; charset=utf-8 94.3788ms
2025-07-28 22:57:00.376 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.377 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/72 - 200 null application/json; charset=utf-8 94.2735ms
2025-07-28 22:57:00.378 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/69 - 200 null application/json; charset=utf-8 93.6849ms
2025-07-28 22:57:00.378 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:57:00.380 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 22:57:00.384 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:57:00.385 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 8.3153ms
2025-07-28 22:57:00.386 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.386 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/63 - 200 null application/json; charset=utf-8 31.4995ms
2025-07-28 22:57:00.386 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 22:57:00.389 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 22:57:00.390 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 5.1026ms
2025-07-28 22:57:00.390 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 22:57:00.391 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/62 - 200 null application/json; charset=utf-8 28.3876ms
2025-07-28 23:03:46.023 +08:00 [INF] Application is shutting down...
2025-07-28 23:09:17.318 +08:00 [FTL] Application start-up failed
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\ProductDevelopment\Cece\CeceLearningPortal.Backend\CeceLearningPortal.Api\Program.cs:line 177
2025-07-28 23:09:45.022 +08:00 [FTL] Application start-up failed
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\ProductDevelopment\Cece\CeceLearningPortal.Backend\CeceLearningPortal.Api\Program.cs:line 177
2025-07-28 23:27:50.361 +08:00 [INF] Checking database connection...
2025-07-28 23:27:51.074 +08:00 [INF] Database connection successful.
2025-07-28 23:27:51.075 +08:00 [INF] Attempting to apply migrations...
2025-07-28 23:27:51.274 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-28 23:27:51.495 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-07-28 23:27:51.502 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-07-28 23:27:51.504 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-28 23:27:51.507 +08:00 [INF] Applying migration '20250728152206_AddSubscriptionAndReviewFields'.
2025-07-28 23:27:51.534 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "SubscriptionPlans" ADD "DisplayOrder" integer NOT NULL DEFAULT 0;
2025-07-28 23:27:51.534 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "SubscriptionPlans" ADD "HasAnalytics" boolean NOT NULL DEFAULT FALSE;
2025-07-28 23:27:51.534 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "SubscriptionPlans" ADD "HasPrioritySupport" boolean NOT NULL DEFAULT FALSE;
2025-07-28 23:27:51.535 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "SubscriptionPlans" ADD "IsRecommended" boolean NOT NULL DEFAULT FALSE;
2025-07-28 23:27:51.535 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "SubscriptionPlans" ADD "MaxCoursesCanCreate" integer;
2025-07-28 23:27:51.535 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "SubscriptionPlans" ADD "MaxStudentsPerCourse" integer;
2025-07-28 23:27:51.535 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "SubscriptionPlans" ADD "PlanType" integer NOT NULL DEFAULT 0;
2025-07-28 23:27:51.536 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "SubscriptionPlans" ADD "TransactionFeePercentage" numeric;
2025-07-28 23:27:51.536 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Reviews" ADD "IsFlagged" boolean NOT NULL DEFAULT FALSE;
2025-07-28 23:27:51.536 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250728152206_AddSubscriptionAndReviewFields', '9.0.7');
2025-07-28 23:27:51.542 +08:00 [INF] Migrations applied successfully.
2025-07-28 23:27:51.542 +08:00 [INF] Starting data seeding...
2025-07-28 23:27:51.555 +08:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-28 23:27:51.666 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Courses" AS c)
2025-07-28 23:27:51.668 +08:00 [INF] Database already contains data. Skipping seed.
2025-07-28 23:27:51.668 +08:00 [INF] Data seeding completed.
2025-07-28 23:27:51.709 +08:00 [INF] Now listening on: http://localhost:5295
2025-07-28 23:27:51.709 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-28 23:27:51.709 +08:00 [INF] Hosting environment: Development
2025-07-28 23:27:51.709 +08:00 [INF] Content root path: D:\ProductDevelopment\Cece\CeceLearningPortal.Backend\CeceLearningPortal.Api
2025-07-28 23:29:30.737 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - null null
2025-07-28 23:29:30.762 +08:00 [WRN] Failed to determine the https port for redirect.
2025-07-28 23:29:30.763 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:30.766 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - 204 null null 29.8473ms
2025-07-28 23:29:30.770 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/login - application/json 51
2025-07-28 23:29:30.773 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:30.874 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:29:30.876 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 23:29:30.884 +08:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(CeceLearningPortal.Api.DTOs.LoginDto) on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 23:29:30.958 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-07-28 23:29:31.151 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?', @p2='?', @p0='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = DateTime), @p8='?', @p9='?', @p10='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "LastLoginAt" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2;
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "RevokedAt", "RevokedByIp", "Token", "UserId")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
2025-07-28 23:29:31.165 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.AuthResponseDto'.
2025-07-28 23:29:31.171 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api) in 285.9497ms
2025-07-28 23:29:31.172 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 23:29:31.174 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/login - 200 null application/json; charset=utf-8 404.3509ms
2025-07-28 23:29:31.199 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 23:29:31.199 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 23:29:31.200 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:31.200 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:31.200 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 1.2007ms
2025-07-28 23:29:31.200 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 0.5239ms
2025-07-28 23:29:31.201 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 23:29:31.201 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 23:29:31.204 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:31.204 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:31.209 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:29:31.212 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:29:31.214 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 23:29:31.228 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 23:29:31.231 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 23:29:31.240 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 23:29:31.246 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 23:29:31.253 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:29:31.254 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:29:31.258 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:29:31.291 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 23:29:31.296 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-28 23:29:31.313 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 23:29:31.320 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 23:29:31.326 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 23:29:31.326 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 23:29:31.332 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 23:29:31.337 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 23:29:31.338 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType9`6[[<>f__AnonymousType10`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 23:29:31.350 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 135.7008ms
2025-07-28 23:29:31.350 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:29:31.350 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 149.4317ms
2025-07-28 23:29:31.390 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:29:31.400 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 141.7062ms
2025-07-28 23:29:31.400 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:29:31.400 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 199.6165ms
2025-07-28 23:29:33.464 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 23:29:33.465 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:33.469 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:29:33.470 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:29:33.470 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 23:29:33.472 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 23:29:33.472 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 23:29:33.473 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 23:29:33.473 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 23:29:33.476 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 23:29:33.477 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 23:29:33.478 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 23:29:33.479 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 23:29:33.480 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 23:29:33.480 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 23:29:33.481 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType9`6[[<>f__AnonymousType10`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 23:29:33.481 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 10.4138ms
2025-07-28 23:29:33.481 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:29:33.481 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 16.8854ms
2025-07-28 23:29:40.119 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 23:29:40.119 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.120 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 0.5844ms
2025-07-28 23:29:40.120 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 23:29:40.121 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.123 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:29:40.123 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:29:40.123 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:29:40.127 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 23:29:40.129 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:29:40.130 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 6.6362ms
2025-07-28 23:29:40.130 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:29:40.130 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 9.3082ms
2025-07-28 23:29:40.131 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - null null
2025-07-28 23:29:40.132 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.132 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - 204 null null 0.2843ms
2025-07-28 23:29:40.132 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - null null
2025-07-28 23:29:40.133 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.133 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - 204 null null 0.8721ms
2025-07-28 23:29:40.134 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - null null
2025-07-28 23:29:40.135 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.135 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - 204 null null 0.1872ms
2025-07-28 23:29:40.135 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - null null
2025-07-28 23:29:40.135 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.135 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - 204 null null 0.1644ms
2025-07-28 23:29:40.135 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - null null
2025-07-28 23:29:40.135 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.135 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - 204 null null 0.1443ms
2025-07-28 23:29:40.136 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - null null
2025-07-28 23:29:40.136 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.136 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - null null
2025-07-28 23:29:40.136 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - null null
2025-07-28 23:29:40.136 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - 204 null null 0.1502ms
2025-07-28 23:29:40.136 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.136 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.136 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - 204 null null 0.3ms
2025-07-28 23:29:40.136 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - 204 null null 0.2754ms
2025-07-28 23:29:40.136 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - null null
2025-07-28 23:29:40.136 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.136 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - null null
2025-07-28 23:29:40.136 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - 204 null null 0.1538ms
2025-07-28 23:29:40.136 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.136 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - 204 null null 0.2361ms
2025-07-28 23:29:40.137 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - null null
2025-07-28 23:29:40.137 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.137 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - 204 null null 0.1382ms
2025-07-28 23:29:40.137 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - null null
2025-07-28 23:29:40.137 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.137 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - 204 null null 0.1409ms
2025-07-28 23:29:40.140 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/73 - application/json null
2025-07-28 23:29:40.141 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/70 - application/json null
2025-07-28 23:29:40.141 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/66 - application/json null
2025-07-28 23:29:40.141 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.141 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.141 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.141 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/72 - application/json null
2025-07-28 23:29:40.141 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.141 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/69 - application/json null
2025-07-28 23:29:40.141 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/65 - application/json null
2025-07-28 23:29:40.141 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.142 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.142 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:29:40.142 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:29:40.143 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.143 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.145 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:29:40.145 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:29:40.157 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-28 23:29:40.184 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:29:40.184 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:29:40.189 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:29:40.189 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:29:40.189 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 43.3517ms
2025-07-28 23:29:40.189 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 43.3323ms
2025-07-28 23:29:40.189 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.189 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.189 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/70 - 200 null application/json; charset=utf-8 48.5253ms
2025-07-28 23:29:40.189 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/66 - 200 null application/json; charset=utf-8 48.4463ms
2025-07-28 23:29:40.190 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/71 - application/json null
2025-07-28 23:29:40.190 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/68 - application/json null
2025-07-28 23:29:40.190 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.190 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.191 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:29:40.191 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:29:40.192 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.192 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.192 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:29:40.192 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:29:40.192 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:29:40.192 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.192 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:29:40.194 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:29:40.194 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:29:40.195 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.58ms
2025-07-28 23:29:40.195 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.195 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/69 - 200 null application/json; charset=utf-8 53.3982ms
2025-07-28 23:29:40.195 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/64 - application/json null
2025-07-28 23:29:40.195 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.196 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:29:40.196 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.196 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:29:40.197 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:29:40.198 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:29:40.198 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 5.8638ms
2025-07-28 23:29:40.198 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.198 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/71 - 200 null application/json; charset=utf-8 7.8957ms
2025-07-28 23:29:40.198 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:29:40.199 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:29:40.199 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/67 - application/json null
2025-07-28 23:29:40.199 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:29:40.199 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.199 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.4198ms
2025-07-28 23:29:40.199 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:29:40.199 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.199 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 7.3141ms
2025-07-28 23:29:40.199 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/64 - 200 null application/json; charset=utf-8 3.8481ms
2025-07-28 23:29:40.199 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.199 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/68 - 200 null application/json; charset=utf-8 9.2193ms
2025-07-28 23:29:40.200 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:29:40.200 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/63 - application/json null
2025-07-28 23:29:40.200 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/62 - application/json null
2025-07-28 23:29:40.200 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.200 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.200 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:29:40.200 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:29:40.201 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:29:40.201 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.201 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:29:40.201 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:29:40.201 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:29:40.201 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.201 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.202 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:29:40.202 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:29:40.202 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:29:40.203 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:29:40.203 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.7269ms
2025-07-28 23:29:40.203 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.203 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/67 - 200 null application/json; charset=utf-8 4.6324ms
2025-07-28 23:29:40.203 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:29:40.203 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:29:40.204 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:29:40.204 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:29:40.204 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.4605ms
2025-07-28 23:29:40.204 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.4503ms
2025-07-28 23:29:40.204 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.204 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.204 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:29:40.204 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/62 - 200 null application/json; charset=utf-8 4.0688ms
2025-07-28 23:29:40.204 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/63 - 200 null application/json; charset=utf-8 4.2163ms
2025-07-28 23:29:40.204 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.204 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:29:40.206 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:29:40.206 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:29:40.207 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:29:40.207 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 5.9752ms
2025-07-28 23:29:40.207 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:29:40.207 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.207 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.4279ms
2025-07-28 23:29:40.207 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/73 - 200 null application/json; charset=utf-8 66.5585ms
2025-07-28 23:29:40.207 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.207 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/72 - 200 null application/json; charset=utf-8 66.0189ms
2025-07-28 23:29:40.207 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:29:40.207 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.208 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:29:40.209 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:29:40.210 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:29:40.210 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.3776ms
2025-07-28 23:29:40.210 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:29:40.210 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/65 - 200 null application/json; charset=utf-8 68.7547ms
2025-07-28 23:30:21.255 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/auth/login - null null
2025-07-28 23:30:21.256 +08:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-07-28 23:30:21.256 +08:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-07-28 23:30:21.256 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/auth/login - 405 0 null 1.0449ms
2025-07-28 23:30:43.826 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 23:30:43.826 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.826 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 0.4533ms
2025-07-28 23:30:43.827 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 23:30:43.827 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.829 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:43.829 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:30:43.829 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:43.835 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 23:30:43.837 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:30:43.837 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 8.0056ms
2025-07-28 23:30:43.837 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:30:43.837 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 10.3254ms
2025-07-28 23:30:43.845 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - null null
2025-07-28 23:30:43.845 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.845 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - 204 null null 0.2633ms
2025-07-28 23:30:43.845 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - null null
2025-07-28 23:30:43.845 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.845 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - 204 null null 0.1287ms
2025-07-28 23:30:43.845 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - null null
2025-07-28 23:30:43.845 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.846 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - 204 null null 0.1057ms
2025-07-28 23:30:43.846 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - null null
2025-07-28 23:30:43.846 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.846 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - 204 null null 0.1258ms
2025-07-28 23:30:43.846 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - null null
2025-07-28 23:30:43.846 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - null null
2025-07-28 23:30:43.846 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.846 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.846 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - 204 null null 0.127ms
2025-07-28 23:30:43.846 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - 204 null null 0.1148ms
2025-07-28 23:30:43.847 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - null null
2025-07-28 23:30:43.847 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.847 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - 204 null null 0.1092ms
2025-07-28 23:30:43.847 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - null null
2025-07-28 23:30:43.847 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.847 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - 204 null null 0.1009ms
2025-07-28 23:30:43.847 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - null null
2025-07-28 23:30:43.847 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.847 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - 204 null null 0.1049ms
2025-07-28 23:30:43.847 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - null null
2025-07-28 23:30:43.848 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.848 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - 204 null null 0.0972ms
2025-07-28 23:30:43.848 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - null null
2025-07-28 23:30:43.848 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.848 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - 204 null null 0.1114ms
2025-07-28 23:30:43.848 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - null null
2025-07-28 23:30:43.849 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.849 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - 204 null null 0.1202ms
2025-07-28 23:30:43.849 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/73 - application/json null
2025-07-28 23:30:43.849 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/70 - application/json null
2025-07-28 23:30:43.849 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.849 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.849 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/66 - application/json null
2025-07-28 23:30:43.849 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.850 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/72 - application/json null
2025-07-28 23:30:43.850 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.850 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/65 - application/json null
2025-07-28 23:30:43.850 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/69 - application/json null
2025-07-28 23:30:43.850 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.850 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.851 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:43.851 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:43.851 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:43.851 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:43.851 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.851 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.851 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.851 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.851 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:43.851 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:43.851 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:43.851 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:43.851 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:43.851 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.851 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:43.852 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:43.852 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.852 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:43.853 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:43.853 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:43.853 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:43.853 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:43.854 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:43.854 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:43.854 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:43.854 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:43.854 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:43.854 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.5147ms
2025-07-28 23:30:43.854 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.7089ms
2025-07-28 23:30:43.854 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.5439ms
2025-07-28 23:30:43.854 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.854 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.854 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.854 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:43.854 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.5524ms
2025-07-28 23:30:43.854 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/72 - 200 null application/json; charset=utf-8 4.2251ms
2025-07-28 23:30:43.854 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.2027ms
2025-07-28 23:30:43.854 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/70 - 200 null application/json; charset=utf-8 4.9456ms
2025-07-28 23:30:43.854 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/73 - 200 null application/json; charset=utf-8 5.0407ms
2025-07-28 23:30:43.854 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.854 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.854 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/65 - 200 null application/json; charset=utf-8 4.2121ms
2025-07-28 23:30:43.854 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/69 - 200 null application/json; charset=utf-8 4.2157ms
2025-07-28 23:30:43.856 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/71 - application/json null
2025-07-28 23:30:43.856 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.856 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/68 - application/json null
2025-07-28 23:30:43.856 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.856 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/64 - application/json null
2025-07-28 23:30:43.856 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/67 - application/json null
2025-07-28 23:30:43.856 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/63 - application/json null
2025-07-28 23:30:43.856 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.856 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.856 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.857 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:43.857 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:43.857 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.857 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.857 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:43.857 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:43.857 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:43.857 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.857 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:43.857 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:43.857 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:43.857 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.857 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.857 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:43.857 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:43.859 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:43.859 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:43.859 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:43.859 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:43.859 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:43.859 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:43.859 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.0085ms
2025-07-28 23:30:43.859 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.859 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:43.859 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:43.859 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/68 - 200 null application/json; charset=utf-8 3.3083ms
2025-07-28 23:30:43.859 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:43.859 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.2355ms
2025-07-28 23:30:43.859 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.1662ms
2025-07-28 23:30:43.859 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 1.9372ms
2025-07-28 23:30:43.859 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.859 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:43.859 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.859 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/63 - 200 null application/json; charset=utf-8 3.4035ms
2025-07-28 23:30:43.859 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.1322ms
2025-07-28 23:30:43.859 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.859 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/71 - 200 null application/json; charset=utf-8 3.8764ms
2025-07-28 23:30:43.860 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/67 - 200 null application/json; charset=utf-8 3.6251ms
2025-07-28 23:30:43.859 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.860 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/64 - 200 null application/json; charset=utf-8 3.7475ms
2025-07-28 23:30:43.861 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:43.861 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:43.861 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 9.8862ms
2025-07-28 23:30:43.861 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.861 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/66 - 200 null application/json; charset=utf-8 11.9649ms
2025-07-28 23:30:43.867 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/62 - application/json null
2025-07-28 23:30:43.867 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:43.868 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:43.868 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.868 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:43.870 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:43.871 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:43.871 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.5228ms
2025-07-28 23:30:43.871 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:43.871 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/62 - 200 null application/json; charset=utf-8 4.0987ms
2025-07-28 23:30:49.247 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - null null
2025-07-28 23:30:49.247 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:49.247 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - 204 null null 0.2995ms
2025-07-28 23:30:49.248 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/logout - application/json 0
2025-07-28 23:30:49.248 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:49.249 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:49.251 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api)'
2025-07-28 23:30:49.252 +08:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 23:30:49.265 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Id", a0."AccessFailedCount", a0."Avatar", a0."ConcurrencyStamp", a0."CreatedAt", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LastLoginAt", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."NotificationPreferences", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."RefreshTokenExpiryTime", a0."Role", a0."SecurityStamp", a0."Status", a0."TwoFactorEnabled", a0."UserName", r."Id", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."RevokedAt", r."RevokedByIp", r."Token", r."UserId"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS a0
LEFT JOIN "RefreshTokens" AS r ON a0."Id" = r."UserId"
ORDER BY a0."Id"
2025-07-28 23:30:49.270 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p7='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "RevokedAt" = @p0
WHERE "Id" = @p1;
UPDATE "RefreshTokens" SET "RevokedAt" = @p2
WHERE "Id" = @p3;
UPDATE "RefreshTokens" SET "RevokedAt" = @p4
WHERE "Id" = @p5;
UPDATE "RefreshTokens" SET "RevokedAt" = @p6
WHERE "Id" = @p7;
2025-07-28 23:30:49.281 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 23:30:49.282 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api) in 29.4491ms
2025-07-28 23:30:49.282 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api)'
2025-07-28 23:30:49.282 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/logout - 200 null application/json; charset=utf-8 33.921ms
2025-07-28 23:30:51.568 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - null null
2025-07-28 23:30:51.568 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:51.568 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - 204 null null 0.2225ms
2025-07-28 23:30:51.569 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/login - application/json 51
2025-07-28 23:30:51.569 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:51.569 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 23:30:51.569 +08:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(CeceLearningPortal.Api.DTOs.LoginDto) on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 23:30:51.577 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-07-28 23:30:51.624 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?', @p2='?', @p0='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = DateTime), @p8='?', @p9='?', @p10='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "LastLoginAt" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2;
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "RevokedAt", "RevokedByIp", "Token", "UserId")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
2025-07-28 23:30:51.625 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.AuthResponseDto'.
2025-07-28 23:30:51.625 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api) in 55.451ms
2025-07-28 23:30:51.625 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 23:30:51.625 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/login - 200 null application/json; charset=utf-8 56.0566ms
2025-07-28 23:30:51.643 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 23:30:51.643 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:51.643 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 0.2132ms
2025-07-28 23:30:51.643 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 23:30:51.644 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:51.644 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 0.2521ms
2025-07-28 23:30:51.645 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 23:30:51.645 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 23:30:51.645 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:51.645 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:51.646 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:51.646 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:51.646 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:30:51.646 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:30:51.646 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:51.646 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 23:30:51.647 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 23:30:51.648 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 23:30:51.649 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 23:30:51.649 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 23:30:51.649 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 23:30:51.650 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:30:51.650 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 3.7671ms
2025-07-28 23:30:51.650 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:30:51.650 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 5.785ms
2025-07-28 23:30:51.652 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 23:30:51.654 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 23:30:51.656 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 23:30:51.656 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 23:30:51.657 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 23:30:51.657 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 23:30:51.657 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType9`6[[<>f__AnonymousType10`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 23:30:51.658 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 11.1437ms
2025-07-28 23:30:51.658 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:30:51.658 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 13.1117ms
2025-07-28 23:30:53.724 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 23:30:53.724 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:53.725 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:53.725 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:30:53.725 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 23:30:53.726 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 23:30:53.726 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 23:30:53.727 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 23:30:53.727 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 23:30:53.729 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 23:30:53.729 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 23:30:53.730 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 23:30:53.731 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 23:30:53.731 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 23:30:53.732 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 23:30:53.732 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType9`6[[<>f__AnonymousType10`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 23:30:53.732 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 6.663ms
2025-07-28 23:30:53.732 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:30:53.732 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 8.6792ms
2025-07-28 23:30:59.735 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 23:30:59.736 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.736 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 0.2444ms
2025-07-28 23:30:59.736 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 23:30:59.736 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.737 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:59.738 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:30:59.738 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:59.740 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 23:30:59.741 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:30:59.741 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 3.2952ms
2025-07-28 23:30:59.741 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:30:59.741 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 4.7367ms
2025-07-28 23:30:59.749 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - null null
2025-07-28 23:30:59.750 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.750 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - 204 null null 0.2504ms
2025-07-28 23:30:59.750 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - null null
2025-07-28 23:30:59.750 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.750 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - 204 null null 0.1033ms
2025-07-28 23:30:59.750 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - null null
2025-07-28 23:30:59.750 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.750 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - 204 null null 0.0984ms
2025-07-28 23:30:59.750 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - null null
2025-07-28 23:30:59.750 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.751 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - 204 null null 0.2133ms
2025-07-28 23:30:59.751 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - null null
2025-07-28 23:30:59.751 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - null null
2025-07-28 23:30:59.751 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.751 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.751 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - 204 null null 0.1694ms
2025-07-28 23:30:59.751 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - 204 null null 0.1335ms
2025-07-28 23:30:59.752 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - null null
2025-07-28 23:30:59.752 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.752 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - 204 null null 0.1106ms
2025-07-28 23:30:59.752 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - null null
2025-07-28 23:30:59.752 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.752 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - null null
2025-07-28 23:30:59.752 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - 204 null null 0.0929ms
2025-07-28 23:30:59.752 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.752 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - 204 null null 0.1549ms
2025-07-28 23:30:59.753 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - null null
2025-07-28 23:30:59.753 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.753 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - 204 null null 0.1008ms
2025-07-28 23:30:59.753 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - null null
2025-07-28 23:30:59.753 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.753 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - 204 null null 0.0846ms
2025-07-28 23:30:59.753 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - null null
2025-07-28 23:30:59.753 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.753 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - 204 null null 0.0873ms
2025-07-28 23:30:59.754 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/73 - application/json null
2025-07-28 23:30:59.754 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.754 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/70 - application/json null
2025-07-28 23:30:59.754 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.754 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/66 - application/json null
2025-07-28 23:30:59.754 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.754 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/72 - application/json null
2025-07-28 23:30:59.755 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/69 - application/json null
2025-07-28 23:30:59.755 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.755 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.755 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/65 - application/json null
2025-07-28 23:30:59.755 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.755 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:59.755 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:59.755 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:59.755 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.755 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.755 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.755 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:59.755 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:59.755 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:59.755 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:59.755 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:59.755 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.756 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.756 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:59.756 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:59.756 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:59.756 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.756 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:59.757 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:59.757 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:59.757 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:59.757 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:59.757 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:59.757 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:59.757 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:59.757 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:59.758 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:59.777 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 21.7996ms
2025-07-28 23:30:59.777 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 21.9823ms
2025-07-28 23:30:59.777 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:59.777 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 22.0279ms
2025-07-28 23:30:59.777 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:59.778 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 22.2114ms
2025-07-28 23:30:59.778 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.778 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:59.778 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.778 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.778 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/73 - 200 null application/json; charset=utf-8 23.9349ms
2025-07-28 23:30:59.778 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/72 - 200 null application/json; charset=utf-8 23.399ms
2025-07-28 23:30:59.778 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.778 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/70 - 200 null application/json; charset=utf-8 23.7102ms
2025-07-28 23:30:59.778 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 22.0309ms
2025-07-28 23:30:59.778 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 22.053ms
2025-07-28 23:30:59.778 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/66 - 200 null application/json; charset=utf-8 23.6713ms
2025-07-28 23:30:59.778 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.778 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.778 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/69 - 200 null application/json; charset=utf-8 23.5877ms
2025-07-28 23:30:59.778 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/65 - 200 null application/json; charset=utf-8 23.5064ms
2025-07-28 23:30:59.780 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/68 - application/json null
2025-07-28 23:30:59.780 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.780 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/67 - application/json null
2025-07-28 23:30:59.780 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.780 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/71 - application/json null
2025-07-28 23:30:59.780 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/64 - application/json null
2025-07-28 23:30:59.780 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.780 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.780 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/63 - application/json null
2025-07-28 23:30:59.780 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.780 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/62 - application/json null
2025-07-28 23:30:59.780 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:30:59.781 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:59.781 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:59.781 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:59.781 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.781 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.781 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:59.781 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:59.781 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.781 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:59.781 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:59.781 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:59.781 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:30:59.781 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.781 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.781 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.781 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:59.781 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:59.781 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:30:59.783 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:59.783 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:59.783 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:59.783 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:59.783 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:59.783 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:30:59.783 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:59.783 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:59.783 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:59.783 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.1304ms
2025-07-28 23:30:59.783 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.2222ms
2025-07-28 23:30:59.783 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:59.783 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:59.783 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.0166ms
2025-07-28 23:30:59.783 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:30:59.783 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.783 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.1601ms
2025-07-28 23:30:59.783 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/67 - 200 null application/json; charset=utf-8 3.6598ms
2025-07-28 23:30:59.783 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.783 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.0848ms
2025-07-28 23:30:59.783 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.0973ms
2025-07-28 23:30:59.783 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.783 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.784 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/68 - 200 null application/json; charset=utf-8 4.1232ms
2025-07-28 23:30:59.784 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/63 - 200 null application/json; charset=utf-8 3.59ms
2025-07-28 23:30:59.784 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.784 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:30:59.784 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/64 - 200 null application/json; charset=utf-8 3.7803ms
2025-07-28 23:30:59.784 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/71 - 200 null application/json; charset=utf-8 3.8768ms
2025-07-28 23:30:59.784 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/62 - 200 null application/json; charset=utf-8 3.3692ms
2025-07-28 23:31:13.397 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 23:31:13.397 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.397 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 0.2138ms
2025-07-28 23:31:13.398 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 23:31:13.398 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.399 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:13.399 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:31:13.399 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:31:13.401 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 23:31:13.402 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:31:13.402 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 3.0711ms
2025-07-28 23:31:13.402 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:31:13.402 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 4.4243ms
2025-07-28 23:31:13.413 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - null null
2025-07-28 23:31:13.413 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.413 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/73 - 204 null null 0.2699ms
2025-07-28 23:31:13.413 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - null null
2025-07-28 23:31:13.413 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.413 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/70 - 204 null null 0.1048ms
2025-07-28 23:31:13.413 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - null null
2025-07-28 23:31:13.413 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.413 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/66 - 204 null null 0.0795ms
2025-07-28 23:31:13.413 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - null null
2025-07-28 23:31:13.413 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.413 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/72 - 204 null null 0.2189ms
2025-07-28 23:31:13.414 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - null null
2025-07-28 23:31:13.414 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.414 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/69 - 204 null null 0.1238ms
2025-07-28 23:31:13.414 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - null null
2025-07-28 23:31:13.414 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.414 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/65 - 204 null null 0.0954ms
2025-07-28 23:31:13.415 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - null null
2025-07-28 23:31:13.415 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.415 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/68 - 204 null null 0.1302ms
2025-07-28 23:31:13.415 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - null null
2025-07-28 23:31:13.415 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.415 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/64 - 204 null null 0.0852ms
2025-07-28 23:31:13.415 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - null null
2025-07-28 23:31:13.415 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.415 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - null null
2025-07-28 23:31:13.416 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/67 - 204 null null 0.093ms
2025-07-28 23:31:13.416 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.416 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/71 - 204 null null 0.1605ms
2025-07-28 23:31:13.416 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - null null
2025-07-28 23:31:13.416 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.416 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/63 - 204 null null 0.0962ms
2025-07-28 23:31:13.416 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - null null
2025-07-28 23:31:13.417 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.417 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses/62 - 204 null null 0.0976ms
2025-07-28 23:31:13.417 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/73 - application/json null
2025-07-28 23:31:13.417 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.417 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/70 - application/json null
2025-07-28 23:31:13.417 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.417 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/66 - application/json null
2025-07-28 23:31:13.417 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.417 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/72 - application/json null
2025-07-28 23:31:13.418 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.418 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/69 - application/json null
2025-07-28 23:31:13.418 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.418 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/65 - application/json null
2025-07-28 23:31:13.418 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.419 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:13.419 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:13.419 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:13.419 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:13.419 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.419 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:13.419 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:13.419 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.419 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.419 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:31:13.419 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:31:13.419 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:31:13.419 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.419 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.419 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.419 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:31:13.419 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:31:13.419 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:31:13.421 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:31:13.421 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:31:13.421 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:31:13.421 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:31:13.421 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:31:13.421 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:31:13.421 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:31:13.422 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:31:13.421 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:31:13.422 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:31:13.422 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.6997ms
2025-07-28 23:31:13.422 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.7222ms
2025-07-28 23:31:13.422 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.7826ms
2025-07-28 23:31:13.422 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:31:13.422 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:31:13.422 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.422 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.5563ms
2025-07-28 23:31:13.422 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.422 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.422 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/72 - 200 null application/json; charset=utf-8 4.5888ms
2025-07-28 23:31:13.422 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/69 - 200 null application/json; charset=utf-8 4.397ms
2025-07-28 23:31:13.422 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.7724ms
2025-07-28 23:31:13.422 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/70 - 200 null application/json; charset=utf-8 4.7841ms
2025-07-28 23:31:13.422 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.422 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.6987ms
2025-07-28 23:31:13.422 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/66 - 200 null application/json; charset=utf-8 4.857ms
2025-07-28 23:31:13.422 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.422 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.422 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/73 - 200 null application/json; charset=utf-8 5.3441ms
2025-07-28 23:31:13.422 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/65 - 200 null application/json; charset=utf-8 4.5795ms
2025-07-28 23:31:13.424 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/68 - application/json null
2025-07-28 23:31:13.424 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.424 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/64 - application/json null
2025-07-28 23:31:13.424 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.424 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/67 - application/json null
2025-07-28 23:31:13.424 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/71 - application/json null
2025-07-28 23:31:13.424 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.424 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.424 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/63 - application/json null
2025-07-28 23:31:13.424 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses/62 - application/json null
2025-07-28 23:31:13.424 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.424 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:13.425 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:13.425 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:13.425 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.425 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.425 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:13.425 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:31:13.425 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:31:13.425 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.425 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:13.425 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:13.425 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:31:13.425 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.425 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:13.425 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.425 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:31:13.425 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.425 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:31:13.425 +08:00 [INF] Route matched with {action = "GetCourse", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourse(Int32) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:31:13.427 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:31:13.427 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:31:13.427 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:31:13.427 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:31:13.427 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:31:13.427 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:31:13.427 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:31:13.427 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:31:13.427 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 1.8085ms
2025-07-28 23:31:13.427 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 1.9459ms
2025-07-28 23:31:13.427 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 1.9279ms
2025-07-28 23:31:13.427 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Category", s."CreatedAt", s."Description", s."Discount", s."Duration", s."EnrollmentType", s."Features", s."InstructorId", s."IsBestseller", s."Level", s."OriginalPrice", s."PreviewUrl", s."Price", s."Status", s."Thumbnail", s."Title", s."UpdatedAt", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt0", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status0", s."TwoFactorEnabled", s."UserName", s0."Id", s0."CourseId", s0."CreatedAt", s0."Description", s0."Order", s0."Title", s0."UpdatedAt", s0."Id0", s0."Content", s0."CreatedAt0", s0."Duration", s0."ModuleId", s0."Order0", s0."Title0", s0."Type", s0."UpdatedAt0", s0."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt" AS "CreatedAt0", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status" AS "Status0", a."TwoFactorEnabled", a."UserName"
    FROM "Courses" AS c
    INNER JOIN "AspNetUsers" AS a ON c."InstructorId" = a."Id"
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS s
LEFT JOIN (
    SELECT c0."Id", c0."CourseId", c0."CreatedAt", c0."Description", c0."Order", c0."Title", c0."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c0
    LEFT JOIN "Lessons" AS l ON c0."Id" = l."ModuleId"
) AS s0 ON s."Id" = s0."CourseId"
LEFT JOIN "Reviews" AS r ON s."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON s."Id" = e."CourseId"
ORDER BY s."Id", s."Id0", s0."Id", s0."Id0", r."Id"
2025-07-28 23:31:13.427 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.427 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:31:13.427 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/67 - 200 null application/json; charset=utf-8 3.2307ms
2025-07-28 23:31:13.427 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 1.9763ms
2025-07-28 23:31:13.427 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.427 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:31:13.427 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/64 - 200 null application/json; charset=utf-8 3.467ms
2025-07-28 23:31:13.427 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.427 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.CourseDto'.
2025-07-28 23:31:13.427 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/68 - 200 null application/json; charset=utf-8 3.8113ms
2025-07-28 23:31:13.427 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.427 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.0366ms
2025-07-28 23:31:13.428 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/71 - 200 null application/json; charset=utf-8 3.5228ms
2025-07-28 23:31:13.427 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api) in 2.0993ms
2025-07-28 23:31:13.428 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.428 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourse (CeceLearningPortal.Api)'
2025-07-28 23:31:13.428 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/63 - 200 null application/json; charset=utf-8 3.5916ms
2025-07-28 23:31:13.428 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses/62 - 200 null application/json; charset=utf-8 3.534ms
2025-07-28 23:31:51.449 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 23:31:51.450 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:51.450 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 0.2236ms
2025-07-28 23:31:51.451 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 23:31:51.451 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:51.453 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:51.453 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:31:51.453 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:31:51.455 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 23:31:51.456 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:31:51.456 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 3.646ms
2025-07-28 23:31:51.457 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:31:51.457 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 5.744ms
2025-07-28 23:31:51.459 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 23:31:51.459 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:51.459 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 0.206ms
2025-07-28 23:31:51.460 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 23:31:51.460 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:51.461 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:51.461 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:31:51.461 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 23:31:51.462 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 23:31:51.462 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 23:31:51.463 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 23:31:51.463 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 23:31:51.465 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 23:31:51.466 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 23:31:51.467 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 23:31:51.468 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 23:31:51.469 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 23:31:51.470 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 23:31:51.470 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType9`6[[<>f__AnonymousType10`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 23:31:51.470 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 8.7886ms
2025-07-28 23:31:51.470 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:31:51.470 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 10.2908ms
2025-07-28 23:31:51.479 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 23:31:51.479 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:51.480 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:51.480 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:31:51.480 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 23:31:51.481 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 23:31:51.482 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 23:31:51.482 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 23:31:51.482 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 23:31:51.484 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 23:31:51.485 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 23:31:51.485 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 23:31:51.486 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 23:31:51.487 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 23:31:51.488 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 23:31:51.488 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType9`6[[<>f__AnonymousType10`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 23:31:51.488 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 7.5659ms
2025-07-28 23:31:51.488 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:31:51.488 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 9.3322ms
2025-07-28 23:31:51.510 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 23:31:51.510 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:51.510 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 0.339ms
2025-07-28 23:31:51.510 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=801dc698-62a8-49c3-b578-b7c1b05049a4 - null null
2025-07-28 23:31:51.510 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:51.510 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=801dc698-62a8-49c3-b578-b7c1b05049a4 - 204 null null 0.1252ms
2025-07-28 23:31:51.510 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=e090c598-224f-4b4c-870a-3c3ef6303e0a - null null
2025-07-28 23:31:51.510 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:51.510 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=e090c598-224f-4b4c-870a-3c3ef6303e0a - 204 null null 0.1175ms
2025-07-28 23:31:51.512 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 23:31:51.512 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:51.512 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=801dc698-62a8-49c3-b578-b7c1b05049a4 - application/json null
2025-07-28 23:31:51.512 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:51.512 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=e090c598-224f-4b4c-870a-3c3ef6303e0a - application/json null
2025-07-28 23:31:51.512 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:31:51.516 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:51.516 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:51.516 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:31:51.516 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:31:51.516 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:31:51.516 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:31:51.516 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:31:51.516 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:31:51.516 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:31:51.519 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 23:31:51.519 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 23:31:51.519 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 23:31:51.520 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:31:51.520 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:31:51.520 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:31:51.521 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 4.6546ms
2025-07-28 23:31:51.521 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 4.6768ms
2025-07-28 23:31:51.521 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 4.6488ms
2025-07-28 23:31:51.521 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:31:51.521 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:31:51.521 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:31:51.521 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=e090c598-224f-4b4c-870a-3c3ef6303e0a - 200 null application/json; charset=utf-8 8.3838ms
2025-07-28 23:31:51.521 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - 200 null application/json; charset=utf-8 8.9436ms
2025-07-28 23:31:51.521 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=801dc698-62a8-49c3-b578-b7c1b05049a4 - 200 null application/json; charset=utf-8 8.971ms
2025-07-28 23:32:05.015 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - null null
2025-07-28 23:32:05.015 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:05.015 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - 204 null null 0.2394ms
2025-07-28 23:32:05.016 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/logout - application/json 0
2025-07-28 23:32:05.016 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:05.017 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:32:05.017 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api)'
2025-07-28 23:32:05.017 +08:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 23:32:05.019 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Id", a0."AccessFailedCount", a0."Avatar", a0."ConcurrencyStamp", a0."CreatedAt", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LastLoginAt", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."NotificationPreferences", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."RefreshTokenExpiryTime", a0."Role", a0."SecurityStamp", a0."Status", a0."TwoFactorEnabled", a0."UserName", r."Id", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."RevokedAt", r."RevokedByIp", r."Token", r."UserId"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS a0
LEFT JOIN "RefreshTokens" AS r ON a0."Id" = r."UserId"
ORDER BY a0."Id"
2025-07-28 23:32:05.030 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "RevokedAt" = @p0
WHERE "Id" = @p1;
2025-07-28 23:32:05.030 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 23:32:05.030 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api) in 13.0811ms
2025-07-28 23:32:05.030 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api)'
2025-07-28 23:32:05.030 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/logout - 200 null application/json; charset=utf-8 14.7365ms
2025-07-28 23:32:05.048 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 23:32:05.049 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:05.049 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 0.2007ms
2025-07-28 23:32:05.050 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 23:32:05.050 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:05.050 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:32:05.050 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:32:05.054 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 23:32:05.055 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:32:05.055 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 4.8735ms
2025-07-28 23:32:05.055 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:32:05.055 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 5.4365ms
2025-07-28 23:32:05.079 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 23:32:05.079 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:05.079 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 0.2817ms
2025-07-28 23:32:05.080 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 23:32:05.081 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:05.082 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 23:32:05.084 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 23:32:05.084 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 401 0 null 4.0065ms
2025-07-28 23:32:07.162 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - null null
2025-07-28 23:32:07.162 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:07.162 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - 204 null null 0.1874ms
2025-07-28 23:32:07.162 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/login - application/json 61
2025-07-28 23:32:07.163 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:07.163 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 23:32:07.163 +08:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(CeceLearningPortal.Api.DTOs.LoginDto) on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 23:32:07.164 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-07-28 23:32:07.211 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?', @p2='?', @p0='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = DateTime), @p8='?', @p9='?', @p10='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "LastLoginAt" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2;
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "RevokedAt", "RevokedByIp", "Token", "UserId")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
2025-07-28 23:32:07.212 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.AuthResponseDto'.
2025-07-28 23:32:07.212 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api) in 49.1845ms
2025-07-28 23:32:07.212 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 23:32:07.212 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/login - 200 null application/json; charset=utf-8 49.6009ms
2025-07-28 23:32:07.230 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 23:32:07.230 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:07.230 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 23:32:07.230 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 0.2232ms
2025-07-28 23:32:07.230 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:07.230 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 0.2128ms
2025-07-28 23:32:07.231 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 23:32:07.231 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:07.231 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 23:32:07.231 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:07.232 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:32:07.232 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:32:07.232 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:32:07.232 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:32:07.232 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 23:32:07.233 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-28 23:32:07.233 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 403 0 null 2.4958ms
2025-07-28 23:32:07.235 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 23:32:07.236 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:32:07.236 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 3.6187ms
2025-07-28 23:32:07.236 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:32:07.236 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 5.1105ms
2025-07-28 23:32:07.239 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - null null
2025-07-28 23:32:07.239 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:07.239 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - 204 null null 0.2227ms
2025-07-28 23:32:07.240 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - application/json null
2025-07-28 23:32:07.241 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:07.242 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:32:07.242 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats - 404 0 null 2.6011ms
2025-07-28 23:32:07.243 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5295/api/users/f9f0e64e-3771-4aa9-8470-21e709677e44/instructor-stats, Response status code: 404
2025-07-28 23:32:07.249 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 23:32:07.249 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:07.249 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 0.1771ms
2025-07-28 23:32:07.250 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 23:32:07.250 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:07.252 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:32:07.252 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:32:07.252 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:32:07.255 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 23:32:07.255 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:32:07.256 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 3.2203ms
2025-07-28 23:32:07.256 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:32:07.256 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses?instructorId=f9f0e64e-3771-4aa9-8470-21e709677e44 - 200 null application/json; charset=utf-8 5.3303ms
2025-07-28 23:32:09.178 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 23:32:09.178 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:09.179 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:32:09.179 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:32:09.179 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:32:09.181 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 23:32:09.182 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:32:09.182 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 2.7229ms
2025-07-28 23:32:09.182 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:32:09.182 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 4.2331ms
2025-07-28 23:32:09.184 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 23:32:09.184 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:09.185 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:32:09.185 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 23:32:09.185 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-28 23:32:09.185 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 403 0 null 1.549ms
2025-07-28 23:32:09.193 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 23:32:09.193 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:09.194 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:32:09.194 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 23:32:09.194 +08:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-28 23:32:09.194 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 403 0 null 1.4971ms
2025-07-28 23:32:09.198 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 23:32:09.198 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:09.198 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 0.1634ms
2025-07-28 23:32:09.198 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - null null
2025-07-28 23:32:09.198 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:09.198 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 204 null null 0.1552ms
2025-07-28 23:32:09.199 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 23:32:09.199 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - application/json null
2025-07-28 23:32:09.199 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:09.200 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:09.200 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:32:09.200 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetInstructorAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:32:09.201 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:32:09.201 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api)'
2025-07-28 23:32:09.202 +08:00 [INF] Route matched with {action = "GetInstructorAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetInstructorAnalytics(System.String) on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 23:32:09.203 +08:00 [INF] Route matched with {action = "GetInstructorRevenue", controller = "Revenue"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetInstructorRevenue(System.String) on controller CeceLearningPortal.Api.Controllers.RevenueController (CeceLearningPortal.Api).
2025-07-28 23:32:09.210 +08:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-28 23:32:09.215 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__p_0
LIMIT 1
2025-07-28 23:32:09.219 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__instructorId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
FROM "Courses" AS c
WHERE c."InstructorId" = @__instructorId_0
2025-07-28 23:32:09.222 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 23:32:09.224 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__instructorId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt", s."Id", s."AverageQuizScore", s."CertificateIssued", s."CertificateUrl", s."CompletedAt", s."CompletedLessons", s."CourseId", s."EnrolledAt", s."LastAccessedDate", s."ProgressPercentage", s."QuizCount", s."StudentId", s."TotalTimeSpent", s."Id0", s."AccessFailedCount", s."Avatar", s."ConcurrencyStamp", s."CreatedAt", s."Email", s."EmailConfirmed", s."FullName", s."LastLoginAt", s."LockoutEnabled", s."LockoutEnd", s."NormalizedEmail", s."NormalizedUserName", s."NotificationPreferences", s."PasswordHash", s."PhoneNumber", s."PhoneNumberConfirmed", s."RefreshToken", s."RefreshTokenExpiryTime", s."Role", s."SecurityStamp", s."Status", s."TwoFactorEnabled", s."UserName", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId"
FROM "Courses" AS c
LEFT JOIN (
    SELECT e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent", a."Id" AS "Id0", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
    FROM "Enrollments" AS e
    INNER JOIN "AspNetUsers" AS a ON e."StudentId" = a."Id"
) AS s ON c."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c."Id" = r."CourseId"
WHERE c."InstructorId" = @__instructorId_0
ORDER BY c."Id", s."Id", s."Id0"
2025-07-28 23:32:09.225 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 23:32:09.228 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 23:32:09.229 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 23:32:09.229 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 23:32:09.230 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 23:32:09.230 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 23:32:09.231 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 23:32:09.231 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__instructorId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
WHERE c."InstructorId" = @__instructorId_0 AND p."Status" = 'Completed'
2025-07-28 23:32:09.231 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 23:32:09.232 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 23:32:09.232 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 23:32:09.232 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 23:32:09.233 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0
2025-07-28 23:32:09.233 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND NOT EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 23:32:09.233 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__courseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
WHERE e."CourseId" = @__courseId_0 AND EXISTS (
    SELECT 1
    FROM "Subscriptions" AS s
    WHERE s."UserId" = e."StudentId" AND s."Status" = 'Active' AND s."StartDate" <= e."EnrolledAt")
2025-07-28 23:32:09.234 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.InstructorRevenueDto'.
2025-07-28 23:32:09.236 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api) in 33.1826ms
2025-07-28 23:32:09.236 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.RevenueController.GetInstructorRevenue (CeceLearningPortal.Api)'
2025-07-28 23:32:09.236 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/revenue/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 200 null application/json; charset=utf-8 36.8412ms
2025-07-28 23:32:09.237 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__instructorId_0='?', @__twelveMonthsAgo_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT s."Year", s."Month", COALESCE(sum(s."Amount"), 0.0) AS "Revenue"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = @__instructorId_0 AND p."Status" = 'Completed' AND p."CreatedAt" >= @__twelveMonthsAgo_1
) AS s
GROUP BY s."Year", s."Month"
ORDER BY s."Year", s."Month"
2025-07-28 23:32:09.243 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 23:32:09.245 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 23:32:09.245 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 23:32:09.246 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 23:32:09.246 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__c_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."CourseId" = @__c_Id_0 AND p."Status" = 'Completed'
2025-07-28 23:32:09.257 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__instructorId_0='?', @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."FullName", s."Title", s."EnrolledAt"
FROM (
    SELECT e."EnrolledAt", e."StudentId", c."Title"
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c ON e."CourseId" = c."Id"
    WHERE c."InstructorId" = @__instructorId_0
    ORDER BY e."EnrolledAt" DESC
    LIMIT @__p_1
) AS s
INNER JOIN "AspNetUsers" AS a ON s."StudentId" = a."Id"
ORDER BY s."EnrolledAt" DESC
2025-07-28 23:32:09.261 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__instructorId_0='?', @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."FullName", s."Title", s."CreatedAt", s."Rating"
FROM (
    SELECT r."CreatedAt", r."Rating", r."StudentId", c."Title"
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c ON r."CourseId" = c."Id"
    WHERE c."InstructorId" = @__instructorId_0
    ORDER BY r."CreatedAt" DESC
    LIMIT @__p_1
) AS s
INNER JOIN "AspNetUsers" AS a ON s."StudentId" = a."Id"
ORDER BY s."CreatedAt" DESC
2025-07-28 23:32:09.262 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType7`5[[<>f__AnonymousType8`6[[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 23:32:09.267 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetInstructorAnalytics (CeceLearningPortal.Api) in 64.6001ms
2025-07-28 23:32:09.267 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetInstructorAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:32:09.267 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/instructor/f9f0e64e-3771-4aa9-8470-21e709677e44 - 200 null application/json; charset=utf-8 68.138ms
2025-07-28 23:32:22.069 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - null null
2025-07-28 23:32:22.069 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:22.069 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/logout - 204 null null 0.2094ms
2025-07-28 23:32:22.070 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/logout - application/json 0
2025-07-28 23:32:22.070 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:22.071 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:32:22.071 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api)'
2025-07-28 23:32:22.071 +08:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout() on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 23:32:22.072 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Id", a0."AccessFailedCount", a0."Avatar", a0."ConcurrencyStamp", a0."CreatedAt", a0."Email", a0."EmailConfirmed", a0."FullName", a0."LastLoginAt", a0."LockoutEnabled", a0."LockoutEnd", a0."NormalizedEmail", a0."NormalizedUserName", a0."NotificationPreferences", a0."PasswordHash", a0."PhoneNumber", a0."PhoneNumberConfirmed", a0."RefreshToken", a0."RefreshTokenExpiryTime", a0."Role", a0."SecurityStamp", a0."Status", a0."TwoFactorEnabled", a0."UserName", r."Id", r."CreatedAt", r."CreatedByIp", r."ExpiresAt", r."ReplacedByToken", r."RevokedAt", r."RevokedByIp", r."Token", r."UserId"
FROM (
    SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
    FROM "AspNetUsers" AS a
    WHERE a."Id" = @__userId_0
    LIMIT 1
) AS a0
LEFT JOIN "RefreshTokens" AS r ON a0."Id" = r."UserId"
ORDER BY a0."Id"
2025-07-28 23:32:22.083 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "RefreshTokens" SET "RevokedAt" = @p0
WHERE "Id" = @p1;
2025-07-28 23:32:22.084 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 23:32:22.084 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api) in 12.3019ms
2025-07-28 23:32:22.084 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Logout (CeceLearningPortal.Api)'
2025-07-28 23:32:22.084 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/logout - 200 null application/json; charset=utf-8 13.8029ms
2025-07-28 23:32:22.114 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 23:32:22.114 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:22.114 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 0.1931ms
2025-07-28 23:32:22.115 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 23:32:22.115 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:22.115 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:32:22.115 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:32:22.118 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 23:32:22.118 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:32:22.119 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 3.1483ms
2025-07-28 23:32:22.119 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:32:22.119 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 3.466ms
2025-07-28 23:32:22.136 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 23:32:22.136 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:22.136 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 0.249ms
2025-07-28 23:32:22.137 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 23:32:22.137 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:32:22.138 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 23:32:22.138 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 23:32:22.138 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 401 0 null 0.7219ms
2025-07-28 23:33:10.760 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/admin/subscription-plans - null null
2025-07-28 23:33:10.761 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 23:33:10.761 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 23:33:10.761 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/admin/subscription-plans - 401 0 null 0.7075ms
2025-07-28 23:33:16.591 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/users - null null
2025-07-28 23:33:16.591 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-07-28 23:33:16.591 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-28 23:33:16.591 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/users - 401 0 null 0.4592ms
2025-07-28 23:33:22.951 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/ - null null
2025-07-28 23:33:22.951 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/ - 404 0 null 0.2151ms
2025-07-28 23:33:22.951 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5295/, Response status code: 404
2025-07-28 23:33:29.464 +08:00 [INF] Request starting HTTP/1.1 HEAD http://localhost:5295/swagger/index.html - null null
2025-07-28 23:33:29.466 +08:00 [INF] Request finished HTTP/1.1 HEAD http://localhost:5295/swagger/index.html - 404 null null 1.9255ms
2025-07-28 23:33:29.466 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: HEAD http://localhost:5295/swagger/index.html, Response status code: 404
2025-07-28 23:33:36.090 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/login - application/json 51
2025-07-28 23:33:36.090 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 23:33:36.090 +08:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(CeceLearningPortal.Api.DTOs.LoginDto) on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 23:33:36.131 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-07-28 23:33:36.178 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?', @p2='?', @p0='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = DateTime), @p8='?', @p9='?', @p10='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "LastLoginAt" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2;
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "RevokedAt", "RevokedByIp", "Token", "UserId")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
2025-07-28 23:33:36.187 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.AuthResponseDto'.
2025-07-28 23:33:36.187 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api) in 96.8965ms
2025-07-28 23:33:36.187 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 23:33:36.187 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/login - 200 null application/json; charset=utf-8 97.2613ms
2025-07-28 23:33:48.461 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/admin/subscription-plans - null null
2025-07-28 23:33:48.464 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:33:48.464 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AdminController.GetSubscriptionPlans (CeceLearningPortal.Api)'
2025-07-28 23:33:48.467 +08:00 [INF] Route matched with {action = "GetSubscriptionPlans", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubscriptionPlans(System.Nullable`1[CeceLearningPortal.Api.Models.SubscriptionPlanType]) on controller CeceLearningPortal.Api.Controllers.AdminController (CeceLearningPortal.Api).
2025-07-28 23:33:48.482 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Name", s."Description", s."PlanType", s."MonthlyPrice", s."YearlyPrice", s."MaxCourseAccess", s."HasUnlimitedAccess", s."MaxCoursesCanCreate", s."MaxStudentsPerCourse", s."TransactionFeePercentage", s."HasAnalytics", s."HasPrioritySupport", s."Features", s."IsActive", s."DisplayOrder", s."IsRecommended", (
    SELECT count(*)::int
    FROM "Subscriptions" AS s0
    WHERE s."Id" = s0."SubscriptionPlanId" AND s0."Status" = 'Active') AS "ActiveSubscribers", (
    SELECT COALESCE(sum(CASE
        WHEN s1."BillingCycle" = 'Monthly' THEN s1."Price"
        ELSE s1."Price" / 12.0
    END), 0.0)
    FROM "Subscriptions" AS s1
    WHERE s."Id" = s1."SubscriptionPlanId" AND s1."Status" = 'Active') AS "MonthlyRevenue"
FROM "SubscriptionPlans" AS s
ORDER BY s."DisplayOrder", s."MonthlyPrice"
2025-07-28 23:33:48.483 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CeceLearningPortal.Api.DTOs.SubscriptionPlanManagementDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:33:48.489 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AdminController.GetSubscriptionPlans (CeceLearningPortal.Api) in 22.0184ms
2025-07-28 23:33:48.489 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AdminController.GetSubscriptionPlans (CeceLearningPortal.Api)'
2025-07-28 23:33:48.489 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/admin/subscription-plans - 200 null application/json; charset=utf-8 27.7854ms
2025-07-28 23:33:57.814 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/admin/subscription-plans - null null
2025-07-28 23:33:57.815 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:33:57.816 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AdminController.GetSubscriptionPlans (CeceLearningPortal.Api)'
2025-07-28 23:33:57.816 +08:00 [INF] Route matched with {action = "GetSubscriptionPlans", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubscriptionPlans(System.Nullable`1[CeceLearningPortal.Api.Models.SubscriptionPlanType]) on controller CeceLearningPortal.Api.Controllers.AdminController (CeceLearningPortal.Api).
2025-07-28 23:33:57.818 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Name", s."Description", s."PlanType", s."MonthlyPrice", s."YearlyPrice", s."MaxCourseAccess", s."HasUnlimitedAccess", s."MaxCoursesCanCreate", s."MaxStudentsPerCourse", s."TransactionFeePercentage", s."HasAnalytics", s."HasPrioritySupport", s."Features", s."IsActive", s."DisplayOrder", s."IsRecommended", (
    SELECT count(*)::int
    FROM "Subscriptions" AS s0
    WHERE s."Id" = s0."SubscriptionPlanId" AND s0."Status" = 'Active') AS "ActiveSubscribers", (
    SELECT COALESCE(sum(CASE
        WHEN s1."BillingCycle" = 'Monthly' THEN s1."Price"
        ELSE s1."Price" / 12.0
    END), 0.0)
    FROM "Subscriptions" AS s1
    WHERE s."Id" = s1."SubscriptionPlanId" AND s1."Status" = 'Active') AS "MonthlyRevenue"
FROM "SubscriptionPlans" AS s
ORDER BY s."DisplayOrder", s."MonthlyPrice"
2025-07-28 23:33:57.818 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CeceLearningPortal.Api.DTOs.SubscriptionPlanManagementDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:33:57.819 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AdminController.GetSubscriptionPlans (CeceLearningPortal.Api) in 2.934ms
2025-07-28 23:33:57.819 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AdminController.GetSubscriptionPlans (CeceLearningPortal.Api)'
2025-07-28 23:33:57.819 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/admin/subscription-plans - 200 null application/json; charset=utf-8 4.5371ms
2025-07-28 23:34:15.891 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/admin/users - null null
2025-07-28 23:34:15.892 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:34:15.893 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AdminController.GetUsers (CeceLearningPortal.Api)'
2025-07-28 23:34:15.896 +08:00 [INF] Route matched with {action = "GetUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers(CeceLearningPortal.Api.DTOs.UserManagementFilterDto) on controller CeceLearningPortal.Api.Controllers.AdminController (CeceLearningPortal.Api).
2025-07-28 23:34:15.901 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 23:34:15.905 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."UserName", a."Email", a."FullName", a."Role", a."Status", a."CreatedAt", a."LastLoginAt", a."EmailConfirmed"
FROM "AspNetUsers" AS a
ORDER BY a."CreatedAt" DESC
LIMIT @__p_1 OFFSET @__p_0
2025-07-28 23:34:15.906 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CeceLearningPortal.Api.DTOs.UserManagementDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:34:15.914 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AdminController.GetUsers (CeceLearningPortal.Api) in 17.7027ms
2025-07-28 23:34:15.914 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AdminController.GetUsers (CeceLearningPortal.Api)'
2025-07-28 23:34:15.914 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/admin/users - 200 null application/json; charset=utf-8 23.1547ms
2025-07-28 23:40:47.440 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - null null
2025-07-28 23:40:47.440 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:40:47.440 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/auth/login - 204 null null 0.3192ms
2025-07-28 23:40:47.441 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/auth/login - application/json 51
2025-07-28 23:40:47.441 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:40:47.441 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 23:40:47.441 +08:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(CeceLearningPortal.Api.DTOs.LoginDto) on controller CeceLearningPortal.Api.Controllers.AuthController (CeceLearningPortal.Api).
2025-07-28 23:40:47.485 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-07-28 23:40:47.532 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?', @p2='?', @p0='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = DateTime), @p6='?', @p7='?' (DbType = DateTime), @p8='?', @p9='?', @p10='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "AspNetUsers" SET "LastLoginAt" = @p0
WHERE "Id" = @p1 AND "ConcurrencyStamp" = @p2;
INSERT INTO "RefreshTokens" ("CreatedAt", "CreatedByIp", "ExpiresAt", "ReplacedByToken", "RevokedAt", "RevokedByIp", "Token", "UserId")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
2025-07-28 23:40:47.533 +08:00 [INF] Executing OkObjectResult, writing value of type 'CeceLearningPortal.Api.DTOs.AuthResponseDto'.
2025-07-28 23:40:47.533 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api) in 91.8644ms
2025-07-28 23:40:47.533 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AuthController.Login (CeceLearningPortal.Api)'
2025-07-28 23:40:47.533 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/auth/login - 200 null application/json; charset=utf-8 92.2354ms
2025-07-28 23:40:47.550 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/courses - null null
2025-07-28 23:40:47.550 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:40:47.550 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/courses - 204 null null 0.2173ms
2025-07-28 23:40:47.551 +08:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - null null
2025-07-28 23:40:47.551 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:40:47.551 +08:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/analytics/platform - 204 null null 0.1948ms
2025-07-28 23:40:47.553 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/courses - application/json null
2025-07-28 23:40:47.553 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:40:47.553 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 23:40:47.553 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:40:47.555 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:40:47.555 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:40:47.555 +08:00 [INF] Route matched with {action = "GetCourses", controller = "Courses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses(CeceLearningPortal.Api.DTOs.CourseFilterDto) on controller CeceLearningPortal.Api.Controllers.CoursesController (CeceLearningPortal.Api).
2025-07-28 23:40:47.561 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Category", c0."CreatedAt", c0."Description", c0."Discount", c0."Duration", c0."EnrollmentType", c0."Features", c0."InstructorId", c0."IsBestseller", c0."Level", c0."OriginalPrice", c0."PreviewUrl", c0."Price", c0."Status", c0."Thumbnail", c0."Title", c0."UpdatedAt", a."Id", a."AccessFailedCount", a."Avatar", a."ConcurrencyStamp", a."CreatedAt", a."Email", a."EmailConfirmed", a."FullName", a."LastLoginAt", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."NotificationPreferences", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."RefreshToken", a."RefreshTokenExpiryTime", a."Role", a."SecurityStamp", a."Status", a."TwoFactorEnabled", a."UserName", s."Id", s."CourseId", s."CreatedAt", s."Description", s."Order", s."Title", s."UpdatedAt", s."Id0", s."Content", s."CreatedAt0", s."Duration", s."ModuleId", s."Order0", s."Title0", s."Type", s."UpdatedAt0", s."VideoUrl", r."Id", r."ApprovedAt", r."ApprovedBy", r."Comment", r."CourseId", r."CreatedAt", r."IsFlagged", r."Rating", r."Status", r."StudentId", e."Id", e."AverageQuizScore", e."CertificateIssued", e."CertificateUrl", e."CompletedAt", e."CompletedLessons", e."CourseId", e."EnrolledAt", e."LastAccessedDate", e."ProgressPercentage", e."QuizCount", e."StudentId", e."TotalTimeSpent"
FROM (
    SELECT c."Id", c."Category", c."CreatedAt", c."Description", c."Discount", c."Duration", c."EnrollmentType", c."Features", c."InstructorId", c."IsBestseller", c."Level", c."OriginalPrice", c."PreviewUrl", c."Price", c."Status", c."Thumbnail", c."Title", c."UpdatedAt"
    FROM "Courses" AS c
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN "AspNetUsers" AS a ON c0."InstructorId" = a."Id"
LEFT JOIN (
    SELECT c1."Id", c1."CourseId", c1."CreatedAt", c1."Description", c1."Order", c1."Title", c1."UpdatedAt", l."Id" AS "Id0", l."Content", l."CreatedAt" AS "CreatedAt0", l."Duration", l."ModuleId", l."Order" AS "Order0", l."Title" AS "Title0", l."Type", l."UpdatedAt" AS "UpdatedAt0", l."VideoUrl"
    FROM "CourseModules" AS c1
    LEFT JOIN "Lessons" AS l ON c1."Id" = l."ModuleId"
) AS s ON c0."Id" = s."CourseId"
LEFT JOIN "Reviews" AS r ON c0."Id" = r."CourseId"
LEFT JOIN "Enrollments" AS e ON c0."Id" = e."CourseId"
ORDER BY c0."CreatedAt" DESC, c0."Id", a."Id", s."Id", s."Id0", r."Id"
2025-07-28 23:40:47.561 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[CeceLearningPortal.Api.Models.Course, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[CeceLearningPortal.Api.DTOs.CourseDto, CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-28 23:40:47.562 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api) in 6.7899ms
2025-07-28 23:40:47.562 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.CoursesController.GetCourses (CeceLearningPortal.Api)'
2025-07-28 23:40:47.562 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/courses - 200 null application/json; charset=utf-8 9.1511ms
2025-07-28 23:40:47.603 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:40:47.603 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:40:47.603 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 23:40:47.604 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 23:40:47.605 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 23:40:47.606 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 23:40:47.607 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 23:40:47.609 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 23:40:47.612 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 23:40:47.613 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 23:40:47.614 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 23:40:47.615 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 23:40:47.616 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 23:40:47.616 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType9`6[[<>f__AnonymousType10`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 23:40:47.616 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 12.9391ms
2025-07-28 23:40:47.616 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:40:47.616 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 63.382ms
2025-07-28 23:40:49.940 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/analytics/platform - application/json null
2025-07-28 23:40:49.940 +08:00 [INF] CORS policy execution successful.
2025-07-28 23:40:49.941 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "RefreshTokens" AS r
    WHERE r."UserId" = @__userId_0 AND r."RevokedAt" IS NULL AND now() < r."ExpiresAt")
2025-07-28 23:40:49.941 +08:00 [INF] Executing endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:40:49.941 +08:00 [INF] Route matched with {action = "GetPlatformAnalytics", controller = "Analytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlatformAnalytics() on controller CeceLearningPortal.Api.Controllers.AnalyticsController (CeceLearningPortal.Api).
2025-07-28 23:40:49.942 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "AspNetUsers" AS a
2025-07-28 23:40:49.942 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Courses" AS c
2025-07-28 23:40:49.942 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COALESCE(sum(p."Amount"), 0.0)
FROM "Payments" AS p
WHERE p."Status" = 'Completed'
2025-07-28 23:40:49.943 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Enrollments" AS e
2025-07-28 23:40:49.945 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id" AS "instructorId", a."FullName" AS "instructorName", (
    SELECT count(*)::int
    FROM "Courses" AS c0
    WHERE c0."InstructorId" = a."Id") AS "totalCourses", (
    SELECT count(*)::int
    FROM "Enrollments" AS e
    INNER JOIN "Courses" AS c1 ON e."CourseId" = c1."Id"
    WHERE c1."InstructorId" = a."Id") AS "totalStudents", (
    SELECT COALESCE(sum(p0."Amount"), 0.0)
    FROM "Payments" AS p0
    LEFT JOIN "Courses" AS c2 ON p0."CourseId" = c2."Id"
    WHERE c2."InstructorId" = a."Id" AND p0."Status" = 'Completed') AS "totalRevenue", COALESCE((
    SELECT avg(r."Rating"::double precision)
    FROM "Reviews" AS r
    INNER JOIN "Courses" AS c3 ON r."CourseId" = c3."Id"
    WHERE c3."InstructorId" = a."Id"), 0.0) AS "averageRating"
FROM "AspNetUsers" AS a
WHERE a."Role" = 'Instructor'
ORDER BY (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c ON p."CourseId" = c."Id"
    WHERE c."InstructorId" = a."Id" AND p."Status" = 'Completed') DESC
LIMIT @__p_0
2025-07-28 23:40:49.946 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Category" AS category, count(*)::int AS "courseCount", COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int AS "enrollmentCount", (
    SELECT COALESCE(sum(p."Amount"), 0.0)
    FROM "Payments" AS p
    LEFT JOIN "Courses" AS c0 ON p."CourseId" = c0."Id"
    WHERE c0."Category" = c."Category" AND p."Status" = 'Completed') AS revenue
FROM "Courses" AS c
GROUP BY c."Category"
ORDER BY COALESCE(sum((
    SELECT count(*)::int
    FROM "Enrollments" AS e
    WHERE c."Id" = e."CourseId")), 0)::int DESC
2025-07-28 23:40:49.947 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."Amount"), 0.0) AS "Revenue", count(*)::int AS "TransactionCount"
FROM (
    SELECT p."Amount", date_part('year', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Payments" AS p
    WHERE p."Status" = 'Completed' AND p."CreatedAt" >= @__sixMonthsAgo_0
) AS p0
GROUP BY p0."Year", p0."Month"
2025-07-28 23:40:49.947 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sixMonthsAgo_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Year", a0."Month", count(*)::int AS "NewUsers"
FROM (
    SELECT date_part('year', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', a."CreatedAt" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "AspNetUsers" AS a
    WHERE a."CreatedAt" >= @__sixMonthsAgo_0
) AS a0
GROUP BY a0."Year", a0."Month"
2025-07-28 23:40:49.947 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
2025-07-28 23:40:49.948 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s."PlanName" AS plan, count(*)::int AS count, COALESCE(sum(s."Price"), 0.0) AS "monthlyRevenue"
FROM "Subscriptions" AS s
WHERE s."Status" = 'Active'
GROUP BY s."PlanName"
2025-07-28 23:40:49.948 +08:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType9`6[[<>f__AnonymousType10`5[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], CeceLearningPortal.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-28 23:40:49.948 +08:00 [INF] Executed action CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api) in 6.4482ms
2025-07-28 23:40:49.948 +08:00 [INF] Executed endpoint 'CeceLearningPortal.Api.Controllers.AnalyticsController.GetPlatformAnalytics (CeceLearningPortal.Api)'
2025-07-28 23:40:49.948 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/analytics/platform - 200 null application/json; charset=utf-8 8.153ms
